$&&$((function(){(()=>{"use strict";var e={34:(e,t,n)=>{var r=n(4901);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},283:(e,t,n)=>{var r=n(9504),o=n(9039),a=n(4901),i=n(9297),s=n(3724),l=n(350).CONFIGURABLE,c=n(3706),u=n(1181),d=u.enforce,f=u.get,p=String,h=Object.defineProperty,m=r("".slice),g=r("".replace),v=r([].join),b=s&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),y=String(String).split("String"),w=e.exports=function(e,t,n){"Symbol("===m(p(t),0,7)&&(t="["+g(p(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!i(e,"name")||l&&e.name!==t)&&(s?h(e,"name",{value:t,configurable:!0}):e.name=t),b&&n&&i(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&i(n,"constructor")&&n.constructor?s&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var r=d(e);return i(r,"source")||(r.source=v(y,"string"==typeof t?t:"")),e};Function.prototype.toString=w((function(){return a(this)&&f(this).source||c(this)}),"toString")},350:(e,t,n)=>{var r=n(3724),o=n(9297),a=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=o(a,"name"),l=s&&"something"===function(){}.name,c=s&&(!r||r&&i(a,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},397:(e,t,n)=>{var r=n(7751);e.exports=r("document","documentElement")},421:e=>{e.exports={}},616:(e,t,n)=>{var r=n(9039);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},655:(e,t,n)=>{var r=n(6955),o=String;e.exports=function(e){if("Symbol"===r(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},741:e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},757:(e,t,n)=>{var r=n(7751),o=n(4901),a=n(1625),i=n(7040),s=Object;e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&a(t.prototype,s(e))}},1072:(e,t,n)=>{var r=n(1828),o=n(8727);e.exports=Object.keys||function(e){return r(e,o)}},1181:(e,t,n)=>{var r,o,a,i=n(8622),s=n(4576),l=n(34),c=n(6699),u=n(9297),d=n(7629),f=n(6119),p=n(421),h="Object already initialized",m=s.TypeError,g=s.WeakMap;if(i||d.state){var v=d.state||(d.state=new g);v.get=v.get,v.has=v.has,v.set=v.set,r=function(e,t){if(v.has(e))throw new m(h);return t.facade=e,v.set(e,t),t},o=function(e){return v.get(e)||{}},a=function(e){return v.has(e)}}else{var b=f("state");p[b]=!0,r=function(e,t){if(u(e,b))throw new m(h);return t.facade=e,c(e,b,t),t},o=function(e){return u(e,b)?e[b]:{}},a=function(e){return u(e,b)}}e.exports={set:r,get:o,has:a,enforce:function(e){return a(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!l(t)||(n=o(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}}}},1291:(e,t,n)=>{var r=n(741);e.exports=function(e){var t=+e;return t!=t||0===t?0:r(t)}},1625:(e,t,n)=>{var r=n(9504);e.exports=r({}.isPrototypeOf)},1828:(e,t,n)=>{var r=n(9504),o=n(9297),a=n(5397),i=n(9617).indexOf,s=n(421),l=r([].push);e.exports=function(e,t){var n,r=a(e),c=0,u=[];for(n in r)!o(s,n)&&o(r,n)&&l(u,n);for(;t.length>c;)o(r,n=t[c++])&&(~i(u,n)||l(u,n));return u}},2140:(e,t,n)=>{var r={};r[n(8227)("toStringTag")]="z",e.exports="[object z]"===String(r)},2195:(e,t,n)=>{var r=n(9504),o=r({}.toString),a=r("".slice);e.exports=function(e){return a(o(e),8,-1)}},2360:(e,t,n)=>{var r,o=n(8551),a=n(6801),i=n(8727),s=n(421),l=n(397),c=n(4055),u=n(6119),d="prototype",f="script",p=u("IE_PROTO"),h=function(){},m=function(e){return"<"+f+">"+e+"</"+f+">"},g=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;v="undefined"!=typeof document?document.domain&&r?g(r):(t=c("iframe"),n="java"+f+":",t.style.display="none",l.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):g(r);for(var o=i.length;o--;)delete v[d][i[o]];return v()};s[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h[d]=o(e),n=new h,h[d]=null,n[p]=e):n=v(),void 0===t?n:a.f(n,t)}},2478:(e,t,n)=>{var r=n(9504),o=n(8981),a=Math.floor,i=r("".charAt),s=r("".replace),l=r("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,r,d,f){var p=n+e.length,h=r.length,m=u;return void 0!==d&&(d=o(d),m=c),s(f,m,(function(o,s){var c;switch(i(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,n);case"'":return l(t,p);case"<":c=d[l(s,1,-1)];break;default:var u=+s;if(0===u)return o;if(u>h){var f=a(u/10);return 0===f?o:f<=h?void 0===r[f-1]?i(s,1):r[f-1]+i(s,1):o}c=r[u-1]}return void 0===c?"":c}))}},2777:(e,t,n)=>{var r=n(9565),o=n(34),a=n(757),i=n(5966),s=n(4270),l=n(8227),c=TypeError,u=l("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,l=i(e,u);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!o(n)||a(n))return n;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},2796:(e,t,n)=>{var r=n(9039),o=n(4901),a=/#|\.prototype\./,i=function(e,t){var n=l[s(e)];return n===u||n!==c&&(o(t)?r(t):!!t)},s=i.normalize=function(e){return String(e).replace(a,".").toLowerCase()},l=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},2839:(e,t,n)=>{var r=n(4576).navigator,o=r&&r.userAgent;e.exports=o?String(o):""},3392:(e,t,n)=>{var r=n(9504),o=0,a=Math.random(),i=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++o+a,36)}},3635:(e,t,n)=>{var r=n(9039),o=n(4576).RegExp;e.exports=r((function(){var e=o(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},3706:(e,t,n)=>{var r=n(9504),o=n(4901),a=n(7629),i=r(Function.toString);o(a.inspectSource)||(a.inspectSource=function(e){return i(e)}),e.exports=a.inspectSource},3717:(e,t)=>{t.f=Object.getOwnPropertySymbols},3724:(e,t,n)=>{var r=n(9039);e.exports=!r((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4055:(e,t,n)=>{var r=n(4576),o=n(34),a=r.document,i=o(a)&&o(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},4117:e=>{e.exports=function(e){return null==e}},4270:(e,t,n)=>{var r=n(9565),o=n(4901),a=n(34),i=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&o(n=e.toString)&&!a(s=r(n,e)))return s;if(o(n=e.valueOf)&&!a(s=r(n,e)))return s;if("string"!==t&&o(n=e.toString)&&!a(s=r(n,e)))return s;throw new i("Can't convert object to primitive value")}},4495:(e,t,n)=>{var r=n(9519),o=n(9039),a=n(4576).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},4576:function(e,t,n){var r=function(e){return e&&e.Math===Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||r("object"==typeof this&&this)||function(){return this}()||Function("return this")()},4901:e=>{var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},4913:(e,t,n)=>{var r=n(3724),o=n(5917),a=n(8686),i=n(8551),s=n(6969),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",f="configurable",p="writable";t.f=r?a?function(e,t,n){if(i(e),t=s(t),i(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var r=u(e,t);r&&r[p]&&(e[t]=n.value,n={configurable:f in n?n[f]:r[f],enumerable:d in n?n[d]:r[d],writable:!1})}return c(e,t,n)}:c:function(e,t,n){if(i(e),t=s(t),i(n),o)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},5031:(e,t,n)=>{var r=n(7751),o=n(9504),a=n(8480),i=n(3717),s=n(8551),l=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(s(e)),n=i.f;return n?l(t,n(e)):t}},5397:(e,t,n)=>{var r=n(7055),o=n(7750);e.exports=function(e){return r(o(e))}},5440:(e,t,n)=>{var r=n(8745),o=n(9565),a=n(9504),i=n(9228),s=n(9039),l=n(8551),c=n(4901),u=n(4117),d=n(1291),f=n(8014),p=n(655),h=n(7750),m=n(7829),g=n(5966),v=n(2478),b=n(6682),y=n(8227)("replace"),w=Math.max,x=Math.min,C=a([].concat),E=a([].push),S=a("".indexOf),$=a("".slice),_="$0"==="a".replace(/./,"$0"),T=!!/./[y]&&""===/./[y]("a","$0");i("replace",(function(e,t,n){var a=T?"$":"$0";return[function(e,n){var r=h(this),a=u(e)?void 0:g(e,y);return a?o(a,e,r,n):o(t,p(r),e,n)},function(e,o){var i=l(this),s=p(e);if("string"==typeof o&&-1===S(o,a)&&-1===S(o,"$<")){var u=n(t,i,s,o);if(u.done)return u.value}var h=c(o);h||(o=p(o));var g,y=i.global;y&&(g=i.unicode,i.lastIndex=0);for(var _,T=[];null!==(_=b(i,s))&&(E(T,_),y);){""===p(_[0])&&(i.lastIndex=m(s,f(i.lastIndex),g))}for(var O,j="",D=0,k=0;k<T.length;k++){for(var I,P=p((_=T[k])[0]),A=w(x(d(_.index),s.length),0),N=[],M=1;M<_.length;M++)E(N,void 0===(O=_[M])?O:String(O));var L=_.groups;if(h){var R=C([P],N,A,s);void 0!==L&&E(R,L),I=p(r(o,void 0,R))}else I=v(P,s,A,N,L,o);A>=D&&(j+=$(s,D,A)+I,D=A+P.length)}return j+$(s,D)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!_||T)},5610:(e,t,n)=>{var r=n(1291),o=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):a(n,t)}},5745:(e,t,n)=>{var r=n(7629);e.exports=function(e,t){return r[e]||(r[e]=t||{})}},5917:(e,t,n)=>{var r=n(3724),o=n(9039),a=n(4055);e.exports=!r&&!o((function(){return 7!==Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},5966:(e,t,n)=>{var r=n(9306),o=n(4117);e.exports=function(e,t){var n=e[t];return o(n)?void 0:r(n)}},6119:(e,t,n)=>{var r=n(5745),o=n(3392),a=r("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},6198:(e,t,n)=>{var r=n(8014);e.exports=function(e){return r(e.length)}},6395:e=>{e.exports=!1},6518:(e,t,n)=>{var r=n(4576),o=n(7347).f,a=n(6699),i=n(6840),s=n(9433),l=n(7740),c=n(2796);e.exports=function(e,t){var n,u,d,f,p,h=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[h]||s(h,{}):r[h]&&r[h].prototype)for(u in t){if(f=t[u],d=e.dontCallGetSet?(p=o(n,u))&&p.value:n[u],!c(m?u:h+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;l(f,d)}(e.sham||d&&d.sham)&&a(f,"sham",!0),i(n,u,f,e)}}},6682:(e,t,n)=>{var r=n(9565),o=n(8551),a=n(4901),i=n(2195),s=n(7323),l=TypeError;e.exports=function(e,t){var n=e.exec;if(a(n)){var c=r(n,e,t);return null!==c&&o(c),c}if("RegExp"===i(e))return r(s,e,t);throw new l("RegExp#exec called on incompatible receiver")}},6699:(e,t,n)=>{var r=n(3724),o=n(4913),a=n(6980);e.exports=r?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},6801:(e,t,n)=>{var r=n(3724),o=n(8686),a=n(4913),i=n(8551),s=n(5397),l=n(1072);t.f=r&&!o?Object.defineProperties:function(e,t){i(e);for(var n,r=s(t),o=l(t),c=o.length,u=0;c>u;)a.f(e,n=o[u++],r[n]);return e}},6823:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},6840:(e,t,n)=>{var r=n(4901),o=n(4913),a=n(283),i=n(9433);e.exports=function(e,t,n,s){s||(s={});var l=s.enumerable,c=void 0!==s.name?s.name:t;if(r(n)&&a(n,c,s),s.global)l?e[t]=n:i(t,n);else{try{s.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},6955:(e,t,n)=>{var r=n(2140),o=n(4901),a=n(2195),i=n(8227)("toStringTag"),s=Object,l="Arguments"===a(function(){return arguments}());e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=s(e),i))?n:l?a(t):"Object"===(r=a(t))&&o(t.callee)?"Arguments":r}},6969:(e,t,n)=>{var r=n(2777),o=n(757);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},6980:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7040:(e,t,n)=>{var r=n(4495);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7055:(e,t,n)=>{var r=n(9504),o=n(9039),a=n(2195),i=Object,s=r("".split);e.exports=o((function(){return!i("z").propertyIsEnumerable(0)}))?function(e){return"String"===a(e)?s(e,""):i(e)}:i},7323:(e,t,n)=>{var r,o,a=n(9565),i=n(9504),s=n(655),l=n(7979),c=n(8429),u=n(5745),d=n(2360),f=n(1181).get,p=n(3635),h=n(8814),m=u("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,v=g,b=i("".charAt),y=i("".indexOf),w=i("".replace),x=i("".slice),C=(o=/b*/g,a(g,r=/a/,"a"),a(g,o,"a"),0!==r.lastIndex||0!==o.lastIndex),E=c.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(C||S||E||p||h)&&(v=function(e){var t,n,r,o,i,c,u,p=this,h=f(p),$=s(e),_=h.raw;if(_)return _.lastIndex=p.lastIndex,t=a(v,_,$),p.lastIndex=_.lastIndex,t;var T=h.groups,O=E&&p.sticky,j=a(l,p),D=p.source,k=0,I=$;if(O&&(j=w(j,"y",""),-1===y(j,"g")&&(j+="g"),I=x($,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==b($,p.lastIndex-1))&&(D="(?: "+D+")",I=" "+I,k++),n=new RegExp("^(?:"+D+")",j)),S&&(n=new RegExp("^"+D+"$(?!\\s)",j)),C&&(r=p.lastIndex),o=a(g,O?n:p,I),O?o?(o.input=x(o.input,k),o[0]=x(o[0],k),o.index=p.lastIndex,p.lastIndex+=o[0].length):p.lastIndex=0:C&&o&&(p.lastIndex=p.global?o.index+o[0].length:r),S&&o&&o.length>1&&a(m,o[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(o[i]=void 0)})),o&&T)for(o.groups=c=d(null),i=0;i<T.length;i++)c[(u=T[i])[0]]=o[u[1]];return o}),e.exports=v},7347:(e,t,n)=>{var r=n(3724),o=n(9565),a=n(8773),i=n(6980),s=n(5397),l=n(6969),c=n(9297),u=n(5917),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=l(t),u)try{return d(e,t)}catch(e){}if(c(e,t))return i(!o(a.f,e,t),e[t])}},7495:(e,t,n)=>{var r=n(6518),o=n(7323);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},7629:(e,t,n)=>{var r=n(6395),o=n(4576),a=n(9433),i="__core-js_shared__",s=e.exports=o[i]||a(i,{});(s.versions||(s.versions=[])).push({version:"3.41.0",mode:r?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.41.0/LICENSE",source:"https://github.com/zloirock/core-js"})},7740:(e,t,n)=>{var r=n(9297),o=n(5031),a=n(7347),i=n(4913);e.exports=function(e,t,n){for(var s=o(t),l=i.f,c=a.f,u=0;u<s.length;u++){var d=s[u];r(e,d)||n&&r(n,d)||l(e,d,c(t,d))}}},7750:(e,t,n)=>{var r=n(4117),o=TypeError;e.exports=function(e){if(r(e))throw new o("Can't call method on "+e);return e}},7751:(e,t,n)=>{var r=n(4576),o=n(4901);e.exports=function(e,t){return arguments.length<2?(n=r[e],o(n)?n:void 0):r[e]&&r[e][t];var n}},7829:(e,t,n)=>{var r=n(8183).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},7979:(e,t,n)=>{var r=n(8551);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},8014:(e,t,n)=>{var r=n(1291),o=Math.min;e.exports=function(e){var t=r(e);return t>0?o(t,9007199254740991):0}},8183:(e,t,n)=>{var r=n(9504),o=n(1291),a=n(655),i=n(7750),s=r("".charAt),l=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,n){var r,u,d=a(i(t)),f=o(n),p=d.length;return f<0||f>=p?e?"":void 0:(r=l(d,f))<55296||r>56319||f+1===p||(u=l(d,f+1))<56320||u>57343?e?s(d,f):r:e?c(d,f,f+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},8227:(e,t,n)=>{var r=n(4576),o=n(5745),a=n(9297),i=n(3392),s=n(4495),l=n(7040),c=r.Symbol,u=o("wks"),d=l?c.for||c:c&&c.withoutSetter||i;e.exports=function(e){return a(u,e)||(u[e]=s&&a(c,e)?c[e]:d("Symbol."+e)),u[e]}},8429:(e,t,n)=>{var r=n(9039),o=n(4576).RegExp,a=r((function(){var e=o("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),i=a||r((function(){return!o("a","y").sticky})),s=a||r((function(){var e=o("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:i,UNSUPPORTED_Y:a}},8480:(e,t,n)=>{var r=n(1828),o=n(8727).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},8551:(e,t,n)=>{var r=n(34),o=String,a=TypeError;e.exports=function(e){if(r(e))return e;throw new a(o(e)+" is not an object")}},8622:(e,t,n)=>{var r=n(4576),o=n(4901),a=r.WeakMap;e.exports=o(a)&&/native code/.test(String(a))},8686:(e,t,n)=>{var r=n(3724),o=n(9039);e.exports=r&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8727:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},8745:(e,t,n)=>{var r=n(616),o=Function.prototype,a=o.apply,i=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(a):function(){return i.apply(a,arguments)})},8773:(e,t)=>{var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},8814:(e,t,n)=>{var r=n(9039),o=n(4576).RegExp;e.exports=r((function(){var e=o("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8981:(e,t,n)=>{var r=n(7750),o=Object;e.exports=function(e){return o(r(e))}},9039:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},9228:(e,t,n)=>{n(7495);var r=n(9565),o=n(6840),a=n(7323),i=n(9039),s=n(8227),l=n(6699),c=s("species"),u=RegExp.prototype;e.exports=function(e,t,n,d){var f=s(e),p=!i((function(){var t={};return t[f]=function(){return 7},7!==""[e](t)})),h=p&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[c]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return t=!0,null},n[f](""),!t}));if(!p||!h||n){var m=/./[f],g=t(f,""[e],(function(e,t,n,o,i){var s=t.exec;return s===a||s===u.exec?p&&!i?{done:!0,value:r(m,t,n,o)}:{done:!0,value:r(e,n,t,o)}:{done:!1}}));o(String.prototype,e,g[0]),o(u,f,g[1])}d&&l(u[f],"sham",!0)}},9297:(e,t,n)=>{var r=n(9504),o=n(8981),a=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(o(e),t)}},9306:(e,t,n)=>{var r=n(4901),o=n(6823),a=TypeError;e.exports=function(e){if(r(e))return e;throw new a(o(e)+" is not a function")}},9433:(e,t,n)=>{var r=n(4576),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9504:(e,t,n)=>{var r=n(616),o=Function.prototype,a=o.call,i=r&&o.bind.bind(a,a);e.exports=r?i:function(e){return function(){return a.apply(e,arguments)}}},9519:(e,t,n)=>{var r,o,a=n(4576),i=n(2839),s=a.process,l=a.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(o=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&i&&(!(r=i.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/))&&(o=+r[1]),e.exports=o},9565:(e,t,n)=>{var r=n(616),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},9617:(e,t,n)=>{var r=n(5397),o=n(5610),a=n(6198),i=function(e){return function(t,n,i){var s=r(t),l=a(s);if(0===l)return!e&&-1;var c,u=o(i,l);if(e&&n!=n){for(;l>u;)if((c=s[u++])!=c)return!0}else for(;l>u;u++)if((e||u in s)&&s[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();const r=window.localStorage,o=(()=>{if(void 0===r)return!1;try{return r.setItem("test","test"),r.removeItem("test"),!0}catch(e){return!1}})();n(5440);const a=function(){if(o){const e={getItem(e){const t=document.e2.cookiePrefix+e;return r.hasOwnProperty(t)?r.getItem(t):r.getItem(e)},setItem(e,t){const n=document.e2.cookiePrefix+e;r.setItem(n,t)},removeItem(e){const t=document.e2.cookiePrefix+e;r.removeItem(t),r.removeItem(e)},hasOwnProperty(e){const t=document.e2.cookiePrefix+e;return r.hasOwnProperty(t)||r.hasOwnProperty(e)}};document.e2.localCopies={_lsKey:"copies-info",_lsPrefix:"copy-",_cookieName:document.e2.cookiePrefix+"local_copies",getName(e){return this._lsPrefix+e},save(t,n){e.setItem(this.getName(t),JSON.stringify(n)),this.addToList(t,n)},remove(t){e.removeItem(this.getName(t)),this.removeFromList(t)},get(t,n,r){let o=!1;try{if(o=JSON.parse(e.getItem(this.getName(t))),!o)return!1}catch(e){return!1}return r&&n&&this.isCopyOutdated(o,n,r)?(this.remove(t),!1):o},getList(){try{return JSON.parse(e.getItem(this._lsKey))||{}}catch(e){return{}}},addToList(t,n){const r=this.getList();r.hasOwnProperty(t)||(r[t]={isPublished:n.isPublished,timestamp:n.timestamp},e.setItem(this._lsKey,JSON.stringify(r)),this.updateCookie(r))},removeFromList(t){const n=this.getList();n.hasOwnProperty(t)&&(delete n[t],e.setItem(this._lsKey,JSON.stringify(n)),this.updateCookie(n))},doesCopyExist(t){return e.hasOwnProperty(this.getName(t))},isCopyOutdated(e,t,n){if(!t||!n)return!1;const r=+e.timestamp,o=n-(new Date).getTime();return Math.abs(o)>216e6&&(t-=o),r<=t},checkOutdatedCopies(){const e=document.e2.noteLastModifiedsById||{},t=this.getList();for(let n in t)"new"!==n&&(e.hasOwnProperty(n)?this.isCopyOutdated(t[n],1e3*e[n],1e3*document.e2.serverTime)&&this.remove(n):this.remove(n))},generateCookie(){document.cookie.match(new RegExp("(?:^|; )"+this._cookieName.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"))||this.updateCookie()},updateCookie(e){e=e||this.getList();const t=[];for(let n in e)"new"!==n&&t.push(n);if(t.length)document.cookie=this._cookieName+"="+t.join(",")+";path=/";else{const e=new Date;e.setTime(e.getTime()-1),document.cookie=this._cookieName+'="";path=/;expires='+e.toUTCString()}}},document.e2.localCopies.checkOutdatedCopies(),document.e2.localCopies.generateCookie()}};const i=function(){var e,t=document.createElement("div"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",MSTransition:"msTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e];return!1};const s=function(e){var t,n,r,o,a=$(".e2-nice-error"),s=a.find(".e2-nice-error-inner"),l="e2-nice-error_hidden",c={en:{"er--js-server-error":"Server error","er--js-appears-offline":"The connection appears to be offline","er--js-connection-timeout":"Server does not respond for too long","er--js-file-upload-not-supported":"The browser does not support file upload","er--js-no-files-to-upload":"No files to upload","er--js-can-upload-only-one-file":"Only one file may be uploaded here","er--supported-image-types":"Supported image types:","er--supported-file-types":"Supported file types:"},ru:{"er--js-server-error":"Ошибка на сервере","er--js-appears-offline":"Похоже, что нет интернета","er--js-connection-timeout":"Сервер не отвечает слишком долго","er--js-file-upload-not-supported":"Браузер не поддерживает загрузку файлов","er--js-no-files-to-upload":"Нет файлов для загрузки","er--js-can-upload-only-one-file":"Можно загрузить только одно изображение","er--supported-image-types":"Поддерживаемые типы изображений:","er--supported-file-types":"Поддерживаемые типы файлов:"},fr:{"er--js-server-error":"Erreur sur le serveur","er--js-appears-offline":"La connexion semble être hors ligne","er--js-connection-timeout":"Le serveur ne répond pas trop longtemps","er--js-file-upload-not-supported":"Le navigateur ne prend pas en charge le téléchargement de fichiers","er--js-no-files-to-upload":"Aucun fichier à télécharger","er--js-can-upload-only-one-file":"Un seul fichier peut être téléchargé ici","er--supported-image-types":"Types d’image pris en charge :","er--supported-file-types":"Types de fichiers pris en charge :"},it:{"er--js-server-error":"Errore sul server","er--js-appears-offline":"La connessione sembra di mancare","er--js-connection-timeout":"Il server non risponde per troppo tempo","er--js-file-upload-not-supported":"Il navigatore web non supporta caricamento dei fili","er--js-no-files-to-upload":"Non ci sono fili da caricare","er--js-can-upload-only-one-file":"Solo un file può essere caricato qui","er--supported-image-types":"Tipi di immagine supportati:","er--supported-file-types":"Tipi di file supportati:"},be:{"er--js-server-error":"Памылка на серверы","er--js-appears-offline":"Падобна на тое, што няма інтэрнэту","er--js-connection-timeout":"Сервер не адказвае занадта доўга","er--js-file-upload-not-supported":"Браузэр не падтрымлівае загрузку файлаў","er--js-no-files-to-upload":"Няма файлаў для загрузкі","er--js-can-upload-only-one-file":"Можна загрузіць толькі адну выяву","er--supported-image-types":"Падтрымлiваемыя тыпы выяў:","er--supported-file-types":"Падтрымлiваемыя тыпы файлаў:"},uk:{"er--js-server-error":"Помилка на сервері","er--js-appears-offline":"Схоже, що немає інтернету","er--js-connection-timeout":"Сервер не відповідає занадто довго","er--js-file-upload-not-supported":"Браузер не підтримує завантаження файлів","er--js-no-files-to-upload":"Немає файлів для завантаження","er--js-can-upload-only-one-file":"Можна завантажити лише одне зображення","er--supported-image-types":"Підтримувані типи зображень:","er--supported-file-types":"Підтримувані типи файлів:"}},u=i();function d(e){"function"==typeof e?u?(a.off(u+".e2NiceError").on(u+".e2NiceError",(function(){a.off(u+".e2NiceError"),e()})),a.addClass(l)):(a.addClass(l),e()):a.addClass(l)}r=e.message?e.message:"",o=$("html").attr("lang")||"en",r&&(void 0!==c[o]&&void 0!==c[o][e.message]?r=c[o][e.message]:void 0!==c.en[e.message]&&(r=c.en[e.message]),a.hasClass(l)?s.html(r).promise().done((function(){a.removeClass(l),$(document).on("mousedown.e2NiceError keydown.e2NiceError",(function(){$(document).off(".e2NiceError"),d()}))})):d((function(){s.html(r).promise().done((function(){a.removeClass(l),$(document).on("mousedown.e2NiceError keydown.e2NiceError",(function(){$(document).off(".e2NiceError"),d()}))}))}))),"object"==typeof e.debug&&"object"==typeof console&&("function"==typeof window.getComputedStyle&&"function"==typeof window.getComputedStyle(document.documentElement).getPropertyValue&&(t=window.getComputedStyle(document.documentElement).getPropertyValue("--errorColor"),n=window.getComputedStyle(document.documentElement).getPropertyValue("--backgroundColor")),"function"==typeof console.log&&("string"==typeof e.debug.message?console.log("%c "+e.debug.message+" ","background: "+(t||"#D20D19")+"; color: "+(n||"#fff")+";"):"string"==typeof r&&console.log("%c "+r+" ","background: "+(t||"#D20D19")+"; color: "+(n||"#fff")+";")),"function"==typeof console.dir&&"function"==typeof console.log&&"object"==typeof e.debug.data&&$.each(e.debug.data,(function(e,t){if("object"==typeof t&&t instanceof FormData&&"function"==typeof t.entries)for(var n of(console.log(e),t.entries()))console.dir(n[1]);else console.log(e),console.dir(t)})))};const l=function(e){var t=e.success,n=e.error,r=e.complete,o=e.abort;delete e.success,delete e.error,delete e.complete,delete e.abort;var a=document.querySelector('meta[name="csrf-token"]'),i=a&&a.content?a.content:null;i&&(e.data=function(e,t){return t?void 0!==window.FormData&&e instanceof window.FormData?("function"==typeof e.has&&e.has("token")||e.append("token",t),e):null==e?{token:t}:"string"==typeof e?(/(?:^|&)token=/.test(e)||(e+=(e.length?"&":"")+"token="+encodeURIComponent(t)),e):Array.isArray(e)?(e.some((function(e){return e&&"token"===e.name}))||e.push({name:"token",value:t}),e):"object"==typeof e?(Object.prototype.hasOwnProperty.call(e,"token")||(e.token=t),e):e:e}(e.data,i));var l=$.ajax($.extend({type:"post",timeout:1e4,dataType:"json",cache:!1},e));return l.done((function(r,o,a){if("object"==typeof r)if(!0===r.success)"function"==typeof t&&t(r,o,a);else{if("object"==typeof r.error){var i=r.error,l="string"==typeof i.message?i.message:"er--js-server-error";s({message:l,debug:{data:{requestData:e.data,response:r}}})}else s({message:"er--js-server-error",debug:{message:"Server responce malformed: `response.error` is not an object",data:{requestData:e.data,response:r}}});"function"==typeof n&&n(a,o)}else s({message:"er--js-server-error",debug:{message:"Server responce malformed: `response` is not an object",data:{requestData:e.data,response:r}}}),"function"==typeof n&&n(a,o)})),l.fail((function(e,t){if("object"==typeof e&&"number"==typeof e.status&&"string"==typeof t)if(0===e.status){if("abort"===t)return"function"==typeof o&&o(e,t),!1;s("timeout"===t?{message:"er--js-connection-timeout"}:{message:"er--js-appears-offline"})}else e.status>=400?s({message:"er--js-server-error",debug:{message:"Server responded with HTTP status code "+e.status,data:{jqXHR:e}}}):200===e.status&&"parsererror"===t?s({message:"er--js-server-error",debug:{message:"Server response is not JSON",data:{jqXHR:e}}}):s({message:"er--js-server-error",debug:{message:"Unexpected server response HTTP status code "+e.status,data:{jqXHR:e}}});else s({message:"er--js-server-error",debug:{message:"Server responce malformed: jqXHR is not an object or it does not contain required fields",data:{jqXHR:e}}});"function"==typeof n&&n(e,t)})),l.always((function(){"function"==typeof r&&r(arguments)})),l};const c=function(e,t,n){if("number"!=typeof t)return;const r=Math.max(Math.min(t,.9),.1);n&&e.attr("class","e2-progress e2-progress_notransition"),e[0].style.strokeDashoffset=Math.floor(245-245*r),n&&e.attr("class","e2-progress")};const u=function(e,t){const n=e.find("animateTransform"),r=e.find("circle.e2-progress");n.length&&(t?"indefinite"!==n[0].getAttribute("repeatCount")&&(n[0].setAttribute("repeatCount","indefinite"),n[0].beginElement()):n[0].setAttribute("repeatCount","1"),r.length&&c(r,0,!0))};const d=function(){const e=$(".e2-note");e.length&&o&&function(e){for(let t=0;t<e.length;t++){const n=e.eq(t).data("note-id").toString();document.e2.localCopies.doesCopyExist(n)&&$(`.e2-note[data-note-id="${n}"] .js-unsaved-led`).show()}}(e)};const f=function(){const e=$("#form-note");if(!o||!e.length)return;const t=$("#note-id"),n=$("#is-note-published"),r=$("#livesave-button"),a=$("#livesave-button + .js-unsaved-led"),i=$("#title"),s=$("#text"),l=$("#tags"),c=$("#alias"),u=$("#stamp"),d=$("#summary"),f=$("#e2-uploaded-images"),p=1e3*+$("#note-timestamp").val(),h=1e3*+$("#server-time").val(),m=t.val();let g={field:null,position:null},v=!1,b=null;function y(){x()}document.e2.localCopies.loadLocalCopy=function(){const e=document.e2.localCopies.get(t.val(),p,h);if(!e)return;const n=e.caretField||(e.caretPosition?"text":null),o="text"===n&&"number"==typeof e.caretPosition,m="string"==typeof e.text?e.text:"";o&&s.one("autosized",(function(){if("function"!=typeof window.getCaretCoordinates)return;const t=window.getCaretCoordinates(s[0],e.caretPosition);window.scrollTo(0,s.position().top+t.top-15)}));document.queryCommandSupported("insertText")?(i.focus().select(),document.execCommand("insertText",!1,e.title),i.trigger("input"),m?(s.addClass("e2-textarea-autosize_off").focus().select(),document.execCommand("insertText",!1,m),s.removeClass("e2-textarea-autosize_off").trigger("input")):s.val(m).trigger("input")):(i.val(e.title).trigger("input"),s.val(m).trigger("input"));const v=e.tags?e.tags.slice():[];v.length&&l.find("option").each(((e,t)=>{const n=v.indexOf(t.text);n>-1&&v.splice(n,1)}));if(v.length){let e;const t=()=>{if(!l.hasClass("chzn-done"))return void(e=setTimeout(t,500));clearTimeout(e);const n=$("#tags_chzn .search-field input");v.forEach((e=>{n.val(e+","),n.trigger({type:"keyup",which:191})}))};e=setTimeout(t,500)}l.val(e.tags).trigger("input"),d.val(e.summary),f.empty().html(e.images.reduce(((e,t)=>void 0!==t.src&&t.src?`${e}<div class="e2-uploaded-image"><div class="e2-uploaded-image-inner"><img src="${t.src}" alt="${t.alt}" width="${t.width}" height="${t.height}"></div></div>`:""),"")),(e.alias&&c.val()!==e.alias||u.val()!==e.stamp)&&(c.val(e.alias).trigger("change"),u.val(e.stamp).trigger("change"),$(".e2-note-time-and-url").slideToggle());s.val().trim()?(r.show(),a.show()):(r.hide(),a.hide());if(o)s.focus(),s[0].selectionStart=s[0].selectionEnd=e.caretPosition,g={field:"text",position:e.caretPosition};else if("title"===n&&"number"==typeof e.caretPosition){const t=(i.val()||"").length,n=Math.min(e.caretPosition,t);i.focus(),i[0].selectionStart=i[0].selectionEnd=n,g={field:"title",position:n}}else if(!m){const e=(i.val()||"").length;i.focus(),i[0].selectionStart=i[0].selectionEnd=e,g={field:"title",position:e}}},document.e2.localCopies.initLocalSaver=x,document.e2.localCopies.destroyLocalSaver=C;const w="input keyup mouseup focus";function x(){v||(e.off("ajaxError",x),b=setInterval(O,3e3),window.addEventListener("beforeunload",O),window.addEventListener("pagehide",E),e.on("submit",C).on("ajaxError",x),s.on(w,_),i.on(w,T),v=!0)}function C(){clearInterval(b),E(),window.removeEventListener("pagehide",E),e.off("submit",C),s.off(w,_),i.off(w,T),v=!1}function E(){window.removeEventListener("beforeunload",O)}function S(e,t){e[0]&&"number"==typeof e[0].selectionEnd&&(g={field:t,position:e[0].selectionEnd})}function _(){S(s,"text")}function T(){S(i,"title")}function O(){const e=function(){const e=f.find(".e2-uploaded-image"),r=t.val(),o=i.val(),a=s.val(),p=[];let h;for(let t=0;t<e.length;t++)h=e.eq(t).find("img"),p.push({src:h.attr("src"),alt:h.attr("alt"),width:h.width(),height:h.height()});return{id:r,title:o,text:a,tags:l.val(),images:p,alias:"new"!==m&&c.val(),stamp:u.val(),summary:d.val(),timestamp:(new Date).getTime(),link:window.location.pathname,isPublished:n.val(),caretPosition:g.position,caretField:g.field}}();e.images.length||e.title.trim()||e.text.trim()||e.tags&&e.tags.length||e.summary&&e.summary.trim()?document.e2.localCopies.save(e.id,e):document.e2.localCopies.remove(e.id)}i.on("input",y),s.on("input",y),l.on("change",y),d.on("input",y)},p=/Macintosh/.test(navigator.userAgent),h=(/(iPad)|(iPhone)/.test(navigator.userAgent),function(){if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)return!0;(function(e){"function"==typeof window.matchMedia&&window.matchMedia(e).matches})(["("," -webkit- -moz- -o- -ms- ".split(" ").join("touch-enabled),("),"heartz",")"].join(""))}(),{});function m(e,t,n){let r;const o={event:"keydown",target:document,prevent:!1};n=function(e,t){if(e){for(let n in t)void 0===e[n]&&(e[n]=t[n]);return e}return t}(n,o),Array.isArray(e)?(r=[],p||(e=e.map((e=>e.replace("Cmd","Ctrl")))),e.forEach((e=>r.push(g(e,t,n))))):(p||(e=e.replace("Cmd","Ctrl")),r=g(e,t,n));const a="string"==typeof n.target?document.querySelector(n.target):n.target;Array.isArray(r)?r.forEach(((r,o)=>{h[e[o]]||(h[e[o]]=[]),a.addEventListener(n.event,r,!1),h[e[o]].push({event:n.event,elem:a,fn:t,realFn:r})})):(h[e]||(h[e]=[]),a.addEventListener(n.event,r,!1),h[e].push({event:n.event,elem:a,fn:t,realFn:r}))}function g(e,t,n){var r;return e=(r=e,r.toLowerCase().replace(/\s/g,"")).split("+"),r=>{(function(e,t){const n=function(e){switch(e){case 91:case 93:return"MetaKey";case 188:return",";case 190:return".";case 219:return"[";case 221:return"]";default:return String.fromCharCode(e).toLowerCase()}}(e.keyCode),r={enter:13},o={},a=["shift","ctrl","alt","cmd"];let i=0;a.forEach((e=>{o[e]={wanted:!1,pressed:!1}})),e.shiftKey&&(o.shift.pressed=!0);e.ctrlKey&&(o.ctrl.pressed=!0);e.altKey&&(o.alt.pressed=!0);e.metaKey&&(o.cmd.pressed=!0);for(let s=0;s<t.length;s++){const l=t[s];a.indexOf(l)>-1?(i++,o[l].wanted=!0):(l.length>1&&r[l]===e.keyCode||n===l)&&i++}return t.length===i&&Object.keys(o).reduce(((e,t)=>e&&o[t].wanted===o[t].pressed),!0)})(r,e)&&(t(r),n.prevent&&(r.preventDefault(),r.stopPropagation()))}}const v=function(){var e=$("#form-note");if(e.length){var t=e.find("#note-id"),n=e.find("#submit-button"),r=t.val(),a=C(),i=a?Object.assign({},a):C(),c=!1,d=!1,f=!1;$(window).bind("pageshow",(function(e){e.originalEvent.persisted&&window.location.reload()})),document.e2.localCopies.initLocalSaver&&document.e2.localCopies.loadLocalCopy&&(document.e2.localCopies.loadLocalCopy(),document.e2.localCopies.initLocalSaver()),e.on("submit",(function(t){t.preventDefault();var n=C();function r(e){a=n,u($("#note-saving"),0),$("#note-saving").hide(),$("#note-saved").fadeIn(200),window.location.href=e.data["note-url"]}function o(){e.trigger("ajaxError"),u($("#note-saving"),0),$("#note-saving").hide(),$("#submit-keyboard-shortcut").show()}f=!0,b(),$("#submit-keyboard-shortcut").hide(),u($("#note-saving"),1),$("#note-saving").show(),v({onCreated:r,onSaved:r,onError:o,onAjaxError:function(e,t){o()},onAjaxComplete:function(){f=!1,b()}})})),$("#title").on("input",(function(){$("#alias").attr("placeholder","")}));var h="change input keyup keydown keypress mouseup mousedown cut copy paste blur",g=function(){b();var e=C();c=!E(i,e),d=!a||!E(a,e);var t=$("#livesave-button, #livesave-button + .js-unsaved-led");c&&d&&""!==e.text?(c=!1,$("#livesaving").hide(),document.e2.localCopies.initLocalSaver(),t.fadeIn(200),i=Object.assign({},e)):d||(d=!1,x(),t.fadeOut(200),i=Object.assign({},e));e.title.trim();var n=e.text.trim();$("#e2-uploaded-images .e2-uploaded-image");!n&&t.is(":visible")&&t.fadeOut(200)};$("#title").add("#tags").add("#text").add("#alias").add("#stamp").on(h,g),$("#tags").on("liszt:ready",(function(){$("#tags_chzn .search-field").on(h,g)})),$("#title").on("keydown",(function(e){13===e.which&&$("#text").focus()})),$("#livesave-button").on("click",(function(){return w(),!1})),m(p?"Cmd+S":"Ctrl+S",w,{prevent:!0}),$("#text").is(":focus")||$("#title").attr("autofocus",!0).focus().val($("#title").val()),b()}function v(n){n=n||{},l({url:e.find("#e2-note-livesave-action").attr("href"),data:e.serialize(),success:function(e){if(void 0===e.data||void 0===e.data.status)return s({message:"er--js-server-error",debug:{message:"Server response malformed",data:{response:e}}}),!1;"function"==typeof n.onAjaxSuccess&&n.onAjaxSuccess(),"created"===e.data.status?(window.history.replaceState&&(window.history.replaceState(null,"",e.data["note-edit-url"]),$(".e2-admin-menu-new-selected").hide(),$(".e2-admin-menu-new").show()),t.val(e.data.id),x(),"function"==typeof n.onCreated&&n.onCreated(e),r=null):"saved"===e.data.status&&($("#alias").val(e.data["new-alias"]),window.history.replaceState&&window.history.replaceState(null,"",e.data["note-edit-url"]),x(),"function"==typeof n.onSaved&&n.onSaved(e),r=null)},error:n.onAjaxError,complete:n.onAjaxComplete})}function b(){var e=!/^ *$/.test($("#title").val())&&!/^ *$/.test($("#text").val())&&!f;n.prop("disabled",!e),n.hide().show(0)}function y(){u($("#livesaving"),0),$("#livesaving").hide(),$("#livesave-button, #livesave-button + .js-unsaved-led").show()}function w(){if(!f){var e=C();if(""!==e.text){if(f=!0,b(),""===e.title){var t,n=e.text;(t=n.indexOf("."))>=0&&(n=n.substr(0,t)),(t=n.indexOf(";"))>=0&&(n=n.substr(0,t)),(t=n.indexOf(","))>=0&&(n=n.substr(0,t)),(t=n.indexOf(")"))>=0&&(n=n.substr(0,t)),0===n.indexOf("((")&&(n=n.substr(2)),n=n.substr(0,1).toUpperCase()+n.substr(1),$("#title").val(n).change()}$("#livesave-button, #livesave-button + .js-unsaved-led").hide(),$("#livesaving").fadeIn(200),u($("#livesaving"),1),v({onCreated:function(){a=e,$("#e2-drafts")&&$("#e2-drafts-item")&&($("#e2-drafts-item").fadeIn(200),$('<div class="e2-admin-menu-item-frame"></div>').css({position:"absolute",left:$("#e2-note-form-wrapper").offset().left,top:$("#e2-note-form-wrapper").offset().top,width:$("#e2-note-form-wrapper").width(),height:$("#e2-note-form-wrapper").height()}).appendTo("body").animate({left:$("#e2-drafts").offset().left-10,top:$("#e2-drafts").offset().top-5,width:$("#e2-drafts").width()+20,height:$("#e2-drafts").height()+10},667).fadeTo(200,.667).fadeOut(200),$("#e2-drafts-count").html(1*$("#e2-drafts-count").html()+1))},onSaved:function(){a=e},onError:y,onAjaxSuccess:function(){u($("#livesaving"),0),$("#livesaving").fadeOut(200)},onAjaxError:function(e,t){y()},onAjaxComplete:function(){f=!1,b()}})}}}function x(){o&&(r?document.e2.localCopies.remove(r):document.e2.localCopies.remove(t.val()),document.e2.localCopies.destroyLocalSaver())}function C(){return{title:$("#title").val(),tags:($("#tags").val()||[]).join(),text:$("#text").val(),alias:$("#alias").val(),stamp:$("#stamp").val()}}function E(e,t){return JSON.stringify(e)===JSON.stringify(t)}};const b=function(){$("#form-note-publish").length&&($(".e2-schedule-controls-revealer").on("click",(function(){if($(".e2-publish-now-controls").hide(),$(".e2-schedule-controls").show(),$(".e2-post-time-control").slideDown(200,(function(){$(".e2-schedule-controls button").prop("disabled",!1)})),""===$("#stamp").val()){var e=new Date,t=e.getDate();t<10&&(t="0"+t);var n=e.getMonth()+1;n<10&&(n="0"+n);var r=e.getFullYear(),o=e.getHours();o+=1,59===e.getMinutes()&&(o+=1),o<10&&(o="0"+o),$("#stamp").val(t+"."+n+"."+r+" "+o+":00:00"),$("#stamp").trigger("change")}return!1})),$(".e2-schedule-controls-unrevealer").on("click",(function(){return $(".e2-schedule-controls").hide(),$(".e2-schedule-controls button").prop("disabled",!0),$(".e2-post-time-control").slideUp(200),$(".e2-publish-now-controls").show(),!1})))},y={type:"inline",parse:function(e){let{pattern:t,text:n,start:r,end:o,isConsequent:a}=e;const{value:i,start:s}=j({text:n,start:r,end:o}),l=O({text:i,start:r-s,end:o-s,pattern:t,isConsequent:a});if(!l)return{isWrapped:!1};const c=l.value.split(l.unwrappedValue);return{...l,isWrapped:!0,realStart:l.start+s,realEnd:l.end+s,prefixLength:c[0].length,suffixLength:c[1].length}},wrap:function(e){let{elem:t,start:n,end:r,prefix:o,suffix:a}=e;const i=D({elem:t,start:n,end:r});E({elem:t,text:`${o}${i.value}${a}`,start:i.start,end:i.end,nextStart:n+o.length,nextEnd:r+o.length})},unwrap:S},w={type:"block",parse:function(e){let{text:t,start:n,end:r,pattern:o}=e;const a=x.filter((e=>"block"===e.type)),i=t.split("\n").reduce(((e,t)=>{const i=e.lastIndex,s=i+t.length;if(!(i<=n&&s>=n||i>=n&&s<=r||i<=r&&s>=r))return{...e,lastIndex:s+1};const l=a.reduce(((e,n)=>{if(e)return e;n.regexp.lastIndex=0;const r=n.regexp.exec(t);if(r){const e=r[0],t=r[1],o=r.index,a=r.index+e.length;return{value:e,wrappedBy:n.name,unwrappedValue:t,prefixLength:e.length-t.length,start:o+i,end:a+i}}}),null),c=l||{value:t,start:i,end:s};return o.lastIndex=0,{lines:[...e.lines,c],lastIndex:s+1,isWrapped:e.isWrapped&&o.test(c.value)}}),{lines:[],lastIndex:0,isWrapped:!0});return delete i.lastIndex,i},wrap:_,unwrap:T},x=[{...y,name:"bold",keys:"Cmd+B",regexp:/\*\*([^\s]{0,2}|[^\s].*?[^\s])\*\*/g,prefix:"**",suffix:"**"},{...y,name:"italic",keys:"Cmd+I",regexp:/\/\/([^\s]{0,2}|[^\s].*?[^\s])\/\//g,prefix:"//",suffix:"//"},{...y,name:"link",keys:"Cmd+K",regexp:/\(\(\s*(.*?)\s*\)\)/g,prefix:"((",suffix:"))",wrap:function(e){let{elem:t,start:n,end:r,prefix:o,suffix:a}=e;const i=D({elem:t,start:n,end:r});let s,l=i.value;i.value?C.test(i.value)?(l=`${o}${i.value} ${a}`,s=i.end+o.length+1):(l=`${o} ${i.value}${a}`,s=i.start+o.length):(l=`${o} ${a}`,s=n+o.length);E({elem:t,text:l,start:i.start,end:i.end,nextStart:s,nextEnd:s})},unwrap:function(e){let{elem:t,start:n,end:r,parsed:o}=e;const{realStart:a,unwrappedValue:i,prefixLength:s}=o,l=i.split(" "),c=a+s;l.length>1&&C.test(l[0])?(t.selectionStart=c,t.selectionEnd=c+l[0].length):S({elem:t,start:n,end:r,parsed:o})}},{...w,name:"header",keys:"Cmd+Alt+1",regexp:/^[^\S\n]*#[^\S\n]*([^#].*)$/g,prefix:"# "},{...w,name:"subheader",keys:"Cmd+Alt+2",regexp:/^[^\S\n]*##[^\S\n]*([^#].*)$/g,prefix:"## "},{...w,name:"remove headers",keys:"Cmd+Alt+0",regexp:/^[^\S\n]*#{1,2}[^\S\n]*([^#].*)$/g,wrap:T},{...w,name:"increase quote level",keys:"Cmd+]",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",nextPrefix:">",unwrap:_},{...w,name:"decrease quote level",keys:"Cmd+[",regexp:/^[^\S\n]*>[^\S\n]*(.*)$/g,prefix:"> ",wrap(){}}],C=/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=+$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z0-9.-]+)((?:\/[+~%/.\w-_]*)?\??(?:[-+=&;%@.\w_]*)#?(?:[.!/\\\w]*))?)/;function E(e){let{elem:t,text:n,start:r,end:o,nextStart:a,nextEnd:i}=e;t.selectionStart=r,t.selectionEnd=o,document.execCommand("insertText",!1,n),$(t).trigger("input"),t.selectionStart=a,t.selectionEnd=i}function S(e){let{elem:t,start:n,end:r,parsed:{realStart:o,realEnd:a,unwrappedValue:i,prefixLength:s,suffixLength:l}}=e;if(!i.length)return void E({elem:t,text:i,start:o,end:a,nextStart:o,nextEnd:o});let c=n-(o+s),u=r-(a-l);c<0&&(u-=c,c=0),u>0&&(u=0);E({elem:t,text:i,start:o,end:a,nextStart:o+c,nextEnd:o+i.length+u})}function _(e){let{elem:t,start:n,end:r,prefix:o,pattern:a,nextPrefix:i,parsed:{lines:s}}=e;const l=s.reduce(((e,t)=>{let n=`${o}${t.value}`;return a.lastIndex=0,a.test(t.value)&&i?n=`${i}${t.value}`:t.unwrappedValue&&(n=`${o}${t.unwrappedValue}`),[...e,n]}),[]).join("\n"),c=s[0].start,u=s[s.length-1].end;let d=n-c,f=r-u;f<c-u&&(f+=c-u-f);const p=c,h=c+l.length;E({elem:t,text:l,start:c,end:u,nextStart:p+d+o.length,nextEnd:h+f})}function T(e){let{elem:t,start:n,end:r,pattern:o,parsed:{lines:a}}=e;const i=a.reduce(((e,t)=>(o.lastIndex=0,[...e,o.test(t.value)?t.unwrappedValue:t.value])),[]).join("\n"),s=a[0].start,l=a[a.length-1].end,c=s+a[0].prefixLength;let u=n-c,d=r-l;u<0&&(u=0),d<c-l&&(d+=c-l-d);E({elem:t,text:i,start:s,end:l,nextStart:s+u,nextEnd:s+i.length+d})}function O(e){let t,{text:n,start:r,end:o,pattern:a,isConsequent:i}=e,s=[];for(console.log(n,r,o),a.lastIndex=0;null!==(t=a.exec(n));){console.log(t);const e=t[0],n=t[1],l=t.index,c=t.index+e.length;l<=r&&c>=o&&s.push({value:e,unwrappedValue:n,start:l,end:c}),i&&(a.lastIndex=t.index+1)}return s.length?(s.sort(((e,t)=>e.value.length-t.value.length)),s[0]):null}function j(e){let{text:t,start:n,end:r}=e;for(n-=1;"\n"!==t[n]&&n>0;)n--;for(0!==n&&n++;"\n"!==t[r]&&r<t.length;)r++;return{value:t.substring(n,r),start:n,end:r}}function D(e){let{elem:t,start:n,end:r}=e,o=n,a=r,i=t.value.substr(n,r-n);if(n===r){const{value:e,start:s}=j({text:t.value,start:n,end:r}),l=O({text:e,start:n-s,end:r-s,pattern:/[^\s]+/g});l&&(o=l.start+s,a=l.end+s,i=l.value)}return{start:o,end:a,value:i}}const k=function(){$("#form-preferences").length&&($("#blog-title").on("input blur cut copy paste keypress",(function(){var e=$("#e2-blog-title"),t=$("#e2-blog-title-default").val();e.length&&e.text(this.value?this.value:t)})),$("#blog-author").on("input blur cut copy paste keypress",(function(){var e=$("#e2-blog-author"),t=$("#e2-blog-author-default").val();e.length&&e.text(this.value?this.value:t)})),$("#notes-per-page").on("change blur focusout",(function(){parseInt(this.value)!=parseInt(this.value)&&(this.value=10),this.value=Math.min(Math.max(this.value,3),100)})),$("#email-notify").on("change",(function(){$(this).is(":checked")&&$("#email").focus()})),$("#show-main-menu").on("change",(function(){$(this).is(":checked")?$("#main-menu-items").slideDown(200):$("#main-menu-items").slideUp(200)})),$(".e2-template-preview-link").addClass("e2-template-preview-link_visible"),$("#e2-template-selector").addClass("e2-template-selector_interactive").find(".e2-template-preview__input").on("change",(function(){var e=$(this),t=e.parents(".e2-template-preview");$(".e2-template-preview_current").removeClass("e2-template-preview_current"),t.addClass("e2-template-preview_current"),$(".e2-template-preview-link").attr("href",e.data("preview-url")),e.data("supports-dark-mode")?$("#respond-to-dark-mode").parents(".form-element").eq(0).slideDown(200):$("#respond-to-dark-mode").parents(".form-element").eq(0).slideUp(200)})))};const I=function(){var e=$("#form-tag");if(e.length){var t=e.find("#submit-button");$("#tag").on("keydown",(function(e){13===e.which&&$("#urlname").focus()})),$("#urlname").on("keydown",(function(e){13===e.which&&$("#page-title").focus()})),$("#page-title").on("keydown",(function(e){13===e.which&&$("#text").focus()})),$(".required").bind("input blur cut copy paste keypress",n),n()}function n(){/^(\.|\s)*$/.test($("#tag").val())||/^ *$/.test($("#urlname").val())?(t.prop("disabled",!0),t.hide().show(0)):(t.prop("disabled",!1),t.hide().show(0))}};const P=function(e){if(window.FormData){var t=new window.FormData;t.append("file",e.file),l({url:e.url,data:t,timeout:0,contentType:!1,processData:!1,xhr:function(){var t=$.ajaxSettings.xhr();return t.upload&&"function"==typeof e.progress&&t.upload.addEventListener("progress",e.progress,!1),t},success:e.success,error:e.error})}else s({message:"er--js-file-upload-not-supported"})};const A=function(e){if("string"!=typeof e)return null;var t=e.split(", ").map((function(e){return e.toLowerCase()}));return t.length?{allows:function(e){if("string"!=typeof e)return!1;var n=e.lastIndexOf(".");if(-1===n)return!1;var r="."+e.slice(n+1).toLowerCase();return-1!==t.indexOf(r)},extensions:t}:null};const N=function(e){var t="";if("neasden"===$("#formatter-id").val()&&(t=e+""),t){var n=document.getElementById("text");if(n.focus(),n.selectionStart||0===n.selectionStart){for(var r=n.selectionStart,o=n.selectionEnd,a=r,i=t+"\n\n",s=!1;"\r"!==n.value.charAt(a)&&"\n"!==n.value.charAt(a)&&a>0;)a-=1;for(;"\r"===n.value.charAt(a)||"\n"===n.value.charAt(a);)a+=1;if("function"==typeof document.execCommand)try{n.setSelectionRange(a,a),s=document.execCommand("insertText",!1,i)}catch(e){s=!1}s||(n.value=n.value.substring(0,a)+i+n.value.substring(a,n.value.length));var l=i.length;n.setSelectionRange(r+l,o+l)}else n.value+="\r\n\r\n"+t;if("createEvent"in document){var c=document.createEvent("HTMLEvents");c.initEvent("change",!1,!0),n.dispatchEvent(c)}else n.fireEvent("onchange");n.focus()}};const M=function(e){var t=$("#e2-file-remove-action").attr("href");if(-1==t.indexOf("?go=")?t+="?":t+="&",$("#form-note").length)t+="entity=note&entity-id="+$("#note-id").val();else{if(!$("#form-tag").length)return!1;t+="entity=tag&entity-id="+$("#tag-id").val()}return l({url:t,data:{file:e.file},success:e.success,error:e.error,complete:e.complete,abort:e.abort})};const L=function(e){var t=$("#e2-file-rename-action").attr("href");if(-1==t.indexOf("?go=")?t+="?":t+="&",$("#form-note").length)t+="entity=note&entity-id="+$("#note-id").val();else{if(!$("#form-tag").length)return!1;t+="entity=tag&entity-id="+$("#tag-id").val()}return l({url:t,data:{file:e.file,"new-name":e.newName},success:e.success,error:e.error,complete:e.complete,abort:e.abort})};const R=function(){if($("#form-tag").length||$("#form-note").length){$(".e2-upload-controls-attach").length>0&&$(document.body).addClass("e2-external-drop-target e2-external-drop-target-body e2-external-drop-target-altable");var e,t=i(),n=[],r=[],o=0,a=0,l=$(".e2-uploaded-images"),d=l.find(".e2-uploaded-image"),f=$(".e2-upload-controls"),p=f.find(".e2-upload-controls-attach"),h=p.find(".e2-upload-controls-attach-input"),m=f.find(".e2-upload-controls-uploading"),g=h.attr("accept"),v=h.data("e2SupportedMessage"),b=A(g),y="e2-upload-controls-attach_hidden",w="e2-upload-controls-uploading_hidden";l.on("click",'[data-e2-js-action*="rename-image"]',(function(e){var t=$(e.currentTarget).parents(".e2-uploaded-image"),n=t.find("#e2-spinner-renaming"),o=t.data("file"),a=prompt("",o);return null===a||""===(a=a.trim())||o===a||(n.fadeIn(200),u(n,1),L({file:o,newName:a,success:function(e){var n=e.data["new-name"];t.find(".e2-image-popup-menu-filename").text(n).attr("title",n),t.data("file",n);var a=r.indexOf(o);-1!==a&&(r[a]=n);var i=document.getElementById("text").value;const s=new RegExp("^"+o+"\\b","gm");i=i.replace(s,n),document.getElementById("text").value=i,document.getElementById("text").dispatchEvent(new Event("input"))},complete:function(){u(n,0),n.hide()}})),!1})).on("click",'[data-e2-js-action*="remove-image"]',(function(e){var n=$(e.currentTarget).parents(".e2-uploaded-image"),o=n.data("file"),a="e2-uploaded-image_deleting";return n.addClass(a),M({file:o,success:function(){r.splice($.inArray(o,r),1),t?(n.off(t+".e2DeleteFile").on(t+".e2DeleteFile",(function(){n.remove()})),n.addClass("e2-uploaded-image_deleted")):n.remove()},error:function(){n.removeClass(a)}}),!1})).on("click",'[data-e2-js-action*="paste-image"]',(function(e){var t=$(e.currentTarget);return N(t.parents(".e2-uploaded-image").data("file")),!1})),d.length&&l.html((e=[],d.each((function(){var t,n,r,o,a,i=$(this),s=i.find("img"),l=i.find(".e2-uploaded-image-noimage");s.length?(t=s.attr("src"),n=s.data("filename"),r=s.data("filesize"),o=s.attr("width"),a=s.attr("height")):(t=l.data("src"),n=l.data("filename")),e.push(x(t,n,r,o,a))})),e)),f.removeClass("e2-upload-controls_hidden"),h.on("change",(function(e){if(!e.target.files.length)return!1;n.length=0;for(var t=0;t<e.target.files.length;t++)n.push(e.target.files[t]),a+=e.target.files[t].size;return C(),!1})),$(".e2-external-drop-target-body, .e2-external-drop-target-textarea").on("drop",(function(e){var t=e.originalEvent.dataTransfer;if(t&&t.files){var r="text"===$(e.target).attr("id");n.length=0;for(var o=0;o<t.files.length;o++)t.files[o].e2AltKeyPressed=e.altKey,t.files[o].e2DroppedIntoTextarea=r,n.push(t.files[o]),a+=t.files[o].size;return C(),!1}})).on("paste",(function(e){const t=(e.clipboardData||e.originalEvent.clipboardData).files||[];if(t.length){n.length=0;for(let e=0;e<t.length;e++){var r=t[e],o=new Date;r.lastModified===o.getTime()&&"image.png"===r.name&&(r=new File([t[e]],f.data("e2FilenamePrefix")+".png",{lastModified:t[e].lastModified,size:t[e].size,type:t[e].type,webkitRelativePath:t[e].webkitRelativePath})),r.e2DroppedIntoTextarea=!0,n.push(r),a+=r.size}return C(),!1}}))}function x(e,t,n,o,a){var i=$("#e2-uploaded-image-prototype").clone(!0),s=i.find(".e2-uploaded-image-inner_good"),l=s.find("img"),c=i.find(".e2-uploaded-image-inner_bad"),u=c.find(".e2-uploaded-image-noimage"),d=i.find(".e2-popup-menu");return i.removeAttr("id").attr("style","").data("file",t).css("width",""),d.find(".e2-image-popup-menu-filename").text(t).attr("title",t),o&&a?(c.remove(),l.attr("src",e+"?"+(new Date).getTime()).attr("width",o).attr("height",a),d.find(".e2-image-popup-menu-filesize").text(n)):(i.addClass("e2-uploaded-image_broken"),s.remove(),u.attr("data-src",e),d.find(".e2-popup-menu-widget-item").filter(":not(.e2-popup-menu-widget-item_info):not(.e2-popup-menu-widget-item_remove)").addClass("e2-popup-menu-widget-item_disabled")),$(document).trigger("E2_ADMIN_ITEM_WITH_POPUP_MENU_INIT",{$popupMenu:d}),-1===$.inArray(t,r)&&r.push(t),i}function C(){for(;n.length;){var e=m.find("circle.e2-progress"),t=n.shift(),i=$("#e2-file-upload-action").attr("href");if(-1==i.indexOf("?go=")?i+="?":i+="&",!b||b.allows(t.name))return void 0!==$("#note-id").val()?i+="entity=note&entity-id="+$("#note-id").val():void 0!==$("#tag-id").val()?i+="entity=tag&entity-id="+$("#tag-id").val():i=null,i&&t.e2AltKeyPressed&&(i+="&overwrite"),u(m,1),m.removeClass(w),p.addClass(y),P({file:t,url:i,progress:function(t){t.lengthComputable&&c(e,(o+t.loaded)/a)},success:function(e){o+=t.size;var a=$('#e2-uploaded-images img[src="'+e.data.thumb+'"], #e2-uploaded-images img[src^="'+e.data.thumb+'?"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src="'+e.data.thumb+'"], #e2-uploaded-images .e2-uploaded-image-noimage[data-src^="'+e.data.thumb+'?"]'),i=a.parents(".e2-uploaded-image");e.data.overwrite?(n.length||(u(m,0),m.addClass(w),p.removeClass(y)),a.length&&(x(e.data.thumb,e.data["new-name"],e.data.filesize,e.data.width,e.data.height).insertAfter(i),i.remove())):(t.e2DroppedIntoTextarea&&N(e.data["new-name"]),-1!==$.inArray(e.data["new-name"],r)?(n.length||(u(m,0),m.addClass(w),p.removeClass(y)),a.length&&(x(e.data.thumb,e.data["new-name"],e.data.filesize,e.data.width,e.data.height).insertAfter(i),i.remove())):x(e.data.thumb,e.data["new-name"],e.data.filesize,e.data.width,e.data.height).appendTo(l).show(200,(function(){n.length||(u(m,0),m.addClass(w),p.removeClass(y))})));C()},error:function(){n.length||(u(m,0),m.addClass(w),p.removeClass(y)),C()},complete:function(){c(e,0)}}),!1;s({message:v,debug:{data:{file:t}}}),n.length||(u(m,0),m.addClass(w),p.removeClass(y))}return a=0,o=0,!0}};
/**!
 * Sortable 1.13.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function H(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var U=H(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),W=H(/Edge/i),q=H(/firefox/i),K=H(/safari/i)&&!H(/chrome/i)&&!H(/android/i),V=H(/iP(ad|od|hone)/i),G=H(/chrome/i)&&H(/android/i),J={capture:!1,passive:!1};function Z(e,t,n){e.addEventListener(t,n,!U&&J)}function Q(e,t,n){e.removeEventListener(t,n,!U&&J)}function ee(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function te(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ne(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ee(e,t):ee(e,t))||r&&e===n)return e;if(e===n)break}while(e=te(e))}return null}var re,oe=/\s+/g;function ae(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(oe," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(oe," ")}}function ie(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function se(e,t){var n="";if("string"==typeof e)n=e;else do{var r=ie(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var o=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return o&&new o(n)}function le(e,t,n){if(e){var r=e.getElementsByTagName(t),o=0,a=r.length;if(n)for(;o<a;o++)n(r[o],o);return r}return[]}function ce(){var e=document.scrollingElement;return e||document.documentElement}function ue(e,t,n,r,o){if(e.getBoundingClientRect||e===window){var a,i,s,l,c,u,d;if(e!==window&&e.parentNode&&e!==ce()?(i=(a=e.getBoundingClientRect()).top,s=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(i=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(o=o||e.parentNode,!U))do{if(o&&o.getBoundingClientRect&&("none"!==ie(o,"transform")||n&&"static"!==ie(o,"position"))){var f=o.getBoundingClientRect();i-=f.top+parseInt(ie(o,"border-top-width")),s-=f.left+parseInt(ie(o,"border-left-width")),l=i+a.height,c=s+a.width;break}}while(o=o.parentNode);if(r&&e!==window){var p=se(o||e),h=p&&p.a,m=p&&p.d;p&&(l=(i/=m)+(u/=m),c=(s/=h)+(d/=h))}return{top:i,left:s,bottom:l,right:c,width:d,height:u}}}function de(e,t,n){for(var r=ge(e,!0),o=ue(e)[t];r;){var a=ue(r)[n];if(!("top"===n||"left"===n?o>=a:o<=a))return r;if(r===ce())break;r=ge(r,!1)}return!1}function fe(e,t,n){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==yt.ghost&&a[o]!==yt.dragged&&ne(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function pe(e,t){for(var n=e.lastElementChild;n&&(n===yt.ghost||"none"===ie(n,"display")||t&&!ee(n,t));)n=n.previousElementSibling;return n||null}function he(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===yt.clone||t&&!ee(e,t)||n++;return n}function me(e){var t=0,n=0,r=ce();if(e)do{var o=se(e),a=o.a,i=o.d;t+=e.scrollLeft*a,n+=e.scrollTop*i}while(e!==r&&(e=e.parentNode));return[t,n]}function ge(e,t){if(!e||!e.getBoundingClientRect)return ce();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var o=ie(n);if(n.clientWidth<n.scrollWidth&&("auto"==o.overflowX||"scroll"==o.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==o.overflowY||"scroll"==o.overflowY)){if(!n.getBoundingClientRect||n===document.body)return ce();if(r||t)return n;r=!0}}}while(n=n.parentNode);return ce()}function ve(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function be(e,t){return function(){if(!re){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),re=setTimeout((function(){re=void 0}),t)}}}function ye(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function we(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var xe="Sortable"+(new Date).getTime();function Ce(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==ie(e,"display")&&e!==yt.ghost){t.push({target:e,rect:ue(e)});var n=Y({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=se(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var o=!1,a=0;t.forEach((function(e){var t=0,n=e.target,i=n.fromRect,s=ue(n),l=n.prevFromRect,c=n.prevToRect,u=e.rect,d=se(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&ve(l,s)&&!ve(i,s)&&(u.top-s.top)/(u.left-s.left)==(i.top-s.top)/(i.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(u,l,c,r.options)),ve(s,i)||(n.prevFromRect=i,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,u,s,t)),t&&(o=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),o?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){ie(e,"transition",""),ie(e,"transform","");var o=se(this.el),a=o&&o.a,i=o&&o.d,s=(t.left-n.left)/(a||1),l=(t.top-n.top)/(i||1);e.animatingX=!!s,e.animatingY=!!l,ie(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),ie(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),ie(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){ie(e,"transition",""),ie(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var Ee=[],Se={initializeByDefault:!0},$e={mount:function(e){for(var t in Se)Se.hasOwnProperty(t)&&!(t in e)&&(e[t]=Se[t]);Ee.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Ee.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var o=e+"Global";Ee.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][o]&&t[r.pluginName][o](Y({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](Y({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var o in Ee.forEach((function(r){var o=r.pluginName;if(e.options[o]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[o]=a,X(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(o)){var a=this.modifyOption(e,o,e.options[o]);void 0!==a&&(e.options[o]=a)}},getEventProperties:function(e,t){var n={};return Ee.forEach((function(r){"function"==typeof r.eventProperties&&X(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return Ee.forEach((function(o){e[o.pluginName]&&o.optionListeners&&"function"==typeof o.optionListeners[t]&&(r=o.optionListeners[t].call(e[o.pluginName],n))})),r}};function _e(e){var t=e.sortable,n=e.rootEl,r=e.name,o=e.targetEl,a=e.cloneEl,i=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[xe]){var m,g=t.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||U||W?(m=document.createEvent("Event")).initEvent(r,!0,!0):m=new CustomEvent(r,{bubbles:!0,cancelable:!0}),m.to=i||n,m.from=s||n,m.item=o||n,m.clone=a,m.oldIndex=l,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=p?p.lastPutMode:void 0;var b=Y({},h,$e.getEventProperties(r,t));for(var y in b)m[y]=b[y];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}var Te=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,o=B(n,["evt"]);$e.pluginEvent.bind(yt)(e,t,Y({dragEl:je,parentEl:De,ghostEl:ke,rootEl:Ie,nextEl:Pe,lastDownEl:Ae,cloneEl:Ne,cloneHidden:Me,dragStarted:Ve,putSortable:Ye,activeSortable:yt.active,originalEvent:r,oldIndex:Le,oldDraggableIndex:Fe,newIndex:Re,newDraggableIndex:ze,hideGhostForTarget:mt,unhideGhostForTarget:gt,cloneNowHidden:function(){Me=!0},cloneNowShown:function(){Me=!1},dispatchSortableEvent:function(e){Oe({sortable:t,name:e,originalEvent:r})}},o))};function Oe(e){_e(Y({putSortable:Ye,cloneEl:Ne,targetEl:je,rootEl:Ie,oldIndex:Le,oldDraggableIndex:Fe,newIndex:Re,newDraggableIndex:ze},e))}var je,De,ke,Ie,Pe,Ae,Ne,Me,Le,Re,Fe,ze,Xe,Ye,Be,He,Ue,We,qe,Ke,Ve,Ge,Je,Ze,Qe,et=!1,tt=!1,nt=[],rt=!1,ot=!1,at=[],it=!1,st=[],lt="undefined"!=typeof document,ct=V,ut=W||U?"cssFloat":"float",dt=lt&&!G&&!V&&"draggable"in document.createElement("div"),ft=function(){if(lt){if(U)return!1;document.createElement("x")}}(),pt=function(e,t){var n=ie(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),o=fe(e,0,t),a=fe(e,1,t),i=o&&ie(o),s=a&&ie(a),l=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+ue(o).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ue(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&i.float&&"none"!==i.float){var u="left"===i.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return o&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||l>=r&&"none"===n[ut]||a&&"none"===n[ut]&&l+c>r)?"vertical":"horizontal"},ht=function(e){function t(e,n){return function(r,o,a,i){var s=r.options.group.name&&o.options.group.name&&r.options.group.name===o.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,o,a,i),n)(r,o,a,i);var l=(n?r:o).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},r=e.group;r&&"object"==F(r)||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},mt=function(){!ft&&ke&&ie(ke,"display","none")},gt=function(){!ft&&ke&&ie(ke,"display","")};lt&&document.addEventListener("click",(function(e){if(tt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),tt=!1,!1}),!0);var vt=function(e){if(je){e=e.touches?e.touches[0]:e;var t=(o=e.clientX,a=e.clientY,nt.some((function(e){if(!pe(e)){var t=ue(e),n=e[xe].options.emptyInsertThreshold,r=o>=t.left-n&&o<=t.right+n,s=a>=t.top-n&&a<=t.bottom+n;return n&&r&&s?i=e:void 0}})),i);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[xe]._onDragOver(n)}}var o,a,i},bt=function(e){je&&je.parentNode[xe]._isOutsideThisEl(e.target)};function yt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=X({},t),e[xe]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==yt.supportPointer&&"PointerEvent"in window&&!K,emptyInsertThreshold:5};for(var r in $e.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var o in ht(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&dt,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Z(e,"pointerdown",this._onTapStart):(Z(e,"mousedown",this._onTapStart),Z(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Z(e,"dragover",this),Z(e,"dragenter",this)),nt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),X(this,Ce())}function wt(e,t,n,r,o,a,i,s){var l,c,u=e[xe],d=u.options.onMove;return!window.CustomEvent||U||W?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=o||t,l.relatedRect=a||ue(t),l.willInsertAfter=s,l.originalEvent=i,e.dispatchEvent(l),d&&(c=d.call(u,l,i)),c}function xt(e){e.draggable=!1}function Ct(){it=!1}function Et(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function St(e){return setTimeout(e,0)}function $t(e){return clearTimeout(e)}yt.prototype={constructor:yt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ge=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,je):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,o=r.preventOnFilter,a=e.type,i=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(i||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=r.filter;if(function(e){st.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&st.push(r)}}(n),!je&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!K||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=ne(s,r.draggable,n,!1))&&s.animated||Ae===s)){if(Le=he(s),Fe=he(s,r.draggable),"function"==typeof c){if(c.call(this,e,s,this))return Oe({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),Te("filter",t,{evt:e}),void(o&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(r){if(r=ne(l,r.trim(),n,!1))return Oe({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),Te("filter",t,{evt:e}),!0}))))return void(o&&e.cancelable&&e.preventDefault());r.handle&&!ne(l,r.handle,n,!1)||this._prepareDragStart(e,i,s)}}},_prepareDragStart:function(e,t,n){var r,o=this,a=o.el,i=o.options,s=a.ownerDocument;if(n&&!je&&n.parentNode===a){var l=ue(n);if(Ie=a,De=(je=n).parentNode,Pe=je.nextSibling,Ae=n,Xe=i.group,yt.dragged=je,Be={target:je,clientX:(t||e).clientX,clientY:(t||e).clientY},qe=Be.clientX-l.left,Ke=Be.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,je.style["will-change"]="all",r=function(){Te("delayEnded",o,{evt:e}),yt.eventCanceled?o._onDrop():(o._disableDelayedDragEvents(),!q&&o.nativeDraggable&&(je.draggable=!0),o._triggerDragStart(e,t),Oe({sortable:o,name:"choose",originalEvent:e}),ae(je,i.chosenClass,!0))},i.ignore.split(",").forEach((function(e){le(je,e.trim(),xt)})),Z(s,"dragover",vt),Z(s,"mousemove",vt),Z(s,"touchmove",vt),Z(s,"mouseup",o._onDrop),Z(s,"touchend",o._onDrop),Z(s,"touchcancel",o._onDrop),q&&this.nativeDraggable&&(this.options.touchStartThreshold=4,je.draggable=!0),Te("delayStart",this,{evt:e}),!i.delay||i.delayOnTouchOnly&&!t||this.nativeDraggable&&(W||U))r();else{if(yt.eventCanceled)return void this._onDrop();Z(s,"mouseup",o._disableDelayedDrag),Z(s,"touchend",o._disableDelayedDrag),Z(s,"touchcancel",o._disableDelayedDrag),Z(s,"mousemove",o._delayedDragTouchMoveHandler),Z(s,"touchmove",o._delayedDragTouchMoveHandler),i.supportPointer&&Z(s,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(r,i.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){je&&xt(je),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Q(e,"mouseup",this._disableDelayedDrag),Q(e,"touchend",this._disableDelayedDrag),Q(e,"touchcancel",this._disableDelayedDrag),Q(e,"mousemove",this._delayedDragTouchMoveHandler),Q(e,"touchmove",this._delayedDragTouchMoveHandler),Q(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Z(document,"pointermove",this._onTouchMove):Z(document,t?"touchmove":"mousemove",this._onTouchMove):(Z(je,"dragend",this),Z(Ie,"dragstart",this._onDragStart));try{document.selection?St((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(et=!1,Ie&&je){Te("dragStarted",this,{evt:t}),this.nativeDraggable&&Z(document,"dragover",bt);var n=this.options;!e&&ae(je,n.dragClass,!1),ae(je,n.ghostClass,!0),yt.active=this,e&&this._appendGhost(),Oe({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(He){this._lastX=He.clientX,this._lastY=He.clientY,mt();for(var e=document.elementFromPoint(He.clientX,He.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(He.clientX,He.clientY))!==t;)t=e;if(je.parentNode[xe]._isOutsideThisEl(e),t)do{if(t[xe]){if(t[xe]._onDragOver({clientX:He.clientX,clientY:He.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);gt()}},_onTouchMove:function(e){if(Be){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=ke&&se(ke,!0),i=ke&&a&&a.a,s=ke&&a&&a.d,l=ct&&Qe&&me(Qe),c=(o.clientX-Be.clientX+r.x)/(i||1)+(l?l[0]-at[0]:0)/(i||1),u=(o.clientY-Be.clientY+r.y)/(s||1)+(l?l[1]-at[1]:0)/(s||1);if(!yt.active&&!et){if(n&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(ke){a?(a.e+=c-(Ue||0),a.f+=u-(We||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");ie(ke,"webkitTransform",d),ie(ke,"mozTransform",d),ie(ke,"msTransform",d),ie(ke,"transform",d),Ue=c,We=u,He=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ke){var e=this.options.fallbackOnBody?document.body:Ie,t=ue(je,!0,ct,!0,e),n=this.options;if(ct){for(Qe=e;"static"===ie(Qe,"position")&&"none"===ie(Qe,"transform")&&Qe!==document;)Qe=Qe.parentNode;Qe!==document.body&&Qe!==document.documentElement?(Qe===document&&(Qe=ce()),t.top+=Qe.scrollTop,t.left+=Qe.scrollLeft):Qe=ce(),at=me(Qe)}ae(ke=je.cloneNode(!0),n.ghostClass,!1),ae(ke,n.fallbackClass,!0),ae(ke,n.dragClass,!0),ie(ke,"transition",""),ie(ke,"transform",""),ie(ke,"box-sizing","border-box"),ie(ke,"margin",0),ie(ke,"top",t.top),ie(ke,"left",t.left),ie(ke,"width",t.width),ie(ke,"height",t.height),ie(ke,"opacity","0.8"),ie(ke,"position",ct?"absolute":"fixed"),ie(ke,"zIndex","100000"),ie(ke,"pointerEvents","none"),yt.ghost=ke,e.appendChild(ke),ie(ke,"transform-origin",qe/parseInt(ke.style.width)*100+"% "+Ke/parseInt(ke.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,o=n.options;Te("dragStart",this,{evt:e}),yt.eventCanceled?this._onDrop():(Te("setupClone",this),yt.eventCanceled||((Ne=we(je)).draggable=!1,Ne.style["will-change"]="",this._hideClone(),ae(Ne,this.options.chosenClass,!1),yt.clone=Ne),n.cloneId=St((function(){Te("clone",n),yt.eventCanceled||(n.options.removeCloneOnHide||Ie.insertBefore(Ne,je),n._hideClone(),Oe({sortable:n,name:"clone"}))})),!t&&ae(je,o.dragClass,!0),t?(tt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(Q(document,"mouseup",n._onDrop),Q(document,"touchend",n._onDrop),Q(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",o.setData&&o.setData.call(n,r,je)),Z(document,"drop",n),ie(je,"transform","translateZ(0)")),et=!0,n._dragStartId=St(n._dragStarted.bind(n,t,e)),Z(document,"selectstart",n),Ve=!0,K&&ie(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,o,a=this.el,i=e.target,s=this.options,l=s.group,c=yt.active,u=Xe===l,d=s.sort,f=Ye||c,p=this,h=!1;if(!it){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),i=ne(i,s.draggable,a,!0),O("dragOver"),yt.eventCanceled)return h;if(je.contains(e.target)||i.animated&&i.animatingX&&i.animatingY||p._ignoreWhileAnimating===i)return D(!1);if(tt=!1,c&&!s.disabled&&(u?d||(r=!Ie.contains(je)):Ye===this||(this.lastPutMode=Xe.checkPull(this,c,je,e))&&l.checkPut(this,c,je,e))){if(o="vertical"===this._getDirection(e,i),t=ue(je),O("dragOverValid"),yt.eventCanceled)return h;if(r)return De=Ie,j(),this._hideClone(),O("revert"),yt.eventCanceled||(Pe?Ie.insertBefore(je,Pe):Ie.appendChild(je)),D(!0);var m=pe(a,s.draggable);if(!m||function(e,t,n){var r=ue(pe(n.el,n.options.draggable)),o=10;return t?e.clientX>r.right+o||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+o}(e,o,this)&&!m.animated){if(m===je)return D(!1);if(m&&a===e.target&&(i=m),i&&(n=ue(i)),!1!==wt(Ie,a,je,t,i,n,e,!!i))return j(),a.appendChild(je),De=a,k(),D(!0)}else if(i.parentNode===a){n=ue(i);var g,v,b,y=je.parentNode!==a,w=!function(e,t,n){var r=n?e.left:e.top,o=n?e.right:e.bottom,a=n?e.width:e.height,i=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===i||o===s||r+a/2===i+l/2}(je.animated&&je.toRect||t,i.animated&&i.toRect||n,o),x=o?"top":"left",C=de(i,"top","top")||de(je,"top","top"),E=C?C.scrollTop:void 0;if(Ge!==i&&(v=n[x],rt=!1,ot=!w&&s.invertSwap||y),g=function(e,t,n,r,o,a,i,s){var l=r?e.clientY:e.clientX,c=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!i)if(s&&Ze<c*o){if(!rt&&(1===Je?l>u+c*a/2:l<d-c*a/2)&&(rt=!0),rt)f=!0;else if(1===Je?l<u+Ze:l>d-Ze)return-Je}else if(l>u+c*(1-o)/2&&l<d-c*(1-o)/2)return function(e){return he(je)<he(e)?1:-1}(t);if((f=f||i)&&(l<u+c*a/2||l>d-c*a/2))return l>u+c/2?1:-1;return 0}(e,i,n,o,w?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,ot,Ge===i),0!==g){var S=he(je);do{S-=g,b=De.children[S]}while(b&&("none"===ie(b,"display")||b===ke))}if(0===g||b===i)return D(!1);Ge=i,Je=g;var $=i.nextElementSibling,_=!1,T=wt(Ie,a,je,t,i,n,e,_=1===g);if(!1!==T)return 1!==T&&-1!==T||(_=1===T),it=!0,setTimeout(Ct,30),j(),_&&!$?a.appendChild(je):i.parentNode.insertBefore(je,_?$:i),C&&ye(C,0,E-C.scrollTop),De=je.parentNode,void 0===v||ot||(Ze=Math.abs(v-ue(i)[x])),k(),D(!0)}if(a.contains(je))return D(!1)}return!1}function O(s,l){Te(s,p,Y({evt:e,isOwner:u,axis:o?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:f,target:i,completed:D,onMove:function(n,r){return wt(Ie,a,je,t,n,ue(n),e,r)},changed:k},l))}function j(){O("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function D(t){return O("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(p),p!==f&&(ae(je,Ye?Ye.options.ghostClass:c.options.ghostClass,!1),ae(je,s.ghostClass,!0)),Ye!==p&&p!==yt.active?Ye=p:p===yt.active&&Ye&&(Ye=null),f===p&&(p._ignoreWhileAnimating=i),p.animateAll((function(){O("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(i===je&&!je.animated||i===a&&!i.animated)&&(Ge=null),s.dragoverBubble||e.rootEl||i===document||(je.parentNode[xe]._isOutsideThisEl(e.target),!t&&vt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function k(){Re=he(je),ze=he(je,s.draggable),Oe({sortable:p,name:"change",toEl:a,newIndex:Re,newDraggableIndex:ze,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Q(document,"mousemove",this._onTouchMove),Q(document,"touchmove",this._onTouchMove),Q(document,"pointermove",this._onTouchMove),Q(document,"dragover",vt),Q(document,"mousemove",vt),Q(document,"touchmove",vt)},_offUpEvents:function(){var e=this.el.ownerDocument;Q(e,"mouseup",this._onDrop),Q(e,"touchend",this._onDrop),Q(e,"pointerup",this._onDrop),Q(e,"touchcancel",this._onDrop),Q(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Re=he(je),ze=he(je,n.draggable),Te("drop",this,{evt:e}),De=je&&je.parentNode,Re=he(je),ze=he(je,n.draggable),yt.eventCanceled||(et=!1,ot=!1,rt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$t(this.cloneId),$t(this._dragStartId),this.nativeDraggable&&(Q(document,"drop",this),Q(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),K&&ie(document.body,"user-select",""),ie(je,"transform",""),e&&(Ve&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),ke&&ke.parentNode&&ke.parentNode.removeChild(ke),(Ie===De||Ye&&"clone"!==Ye.lastPutMode)&&Ne&&Ne.parentNode&&Ne.parentNode.removeChild(Ne),je&&(this.nativeDraggable&&Q(je,"dragend",this),xt(je),je.style["will-change"]="",Ve&&!et&&ae(je,Ye?Ye.options.ghostClass:this.options.ghostClass,!1),ae(je,this.options.chosenClass,!1),Oe({sortable:this,name:"unchoose",toEl:De,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ie!==De?(Re>=0&&(Oe({rootEl:De,name:"add",toEl:De,fromEl:Ie,originalEvent:e}),Oe({sortable:this,name:"remove",toEl:De,originalEvent:e}),Oe({rootEl:De,name:"sort",toEl:De,fromEl:Ie,originalEvent:e}),Oe({sortable:this,name:"sort",toEl:De,originalEvent:e})),Ye&&Ye.save()):Re!==Le&&Re>=0&&(Oe({sortable:this,name:"update",toEl:De,originalEvent:e}),Oe({sortable:this,name:"sort",toEl:De,originalEvent:e})),yt.active&&(null!=Re&&-1!==Re||(Re=Le,ze=Fe),Oe({sortable:this,name:"end",toEl:De,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){Te("nulling",this),Ie=je=De=ke=Pe=Ne=Ae=Me=Be=He=Ve=Re=ze=Le=Fe=Ge=Je=Ye=Xe=yt.dragged=yt.ghost=yt.clone=yt.active=null,st.forEach((function(e){e.checked=!0})),st.length=Ue=We=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":je&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,o=n.length,a=this.options;r<o;r++)ne(e=n[r],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||Et(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var o=r.children[t];ne(o,this.options.draggable,r,!1)&&(n[e]=o)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ne(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=$e.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&ht(n)},destroy:function(){Te("destroy",this);var e=this.el;e[xe]=null,Q(e,"mousedown",this._onTapStart),Q(e,"touchstart",this._onTapStart),Q(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Q(e,"dragover",this),Q(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),nt.splice(nt.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Me){if(Te("hideClone",this),yt.eventCanceled)return;ie(Ne,"display","none"),this.options.removeCloneOnHide&&Ne.parentNode&&Ne.parentNode.removeChild(Ne),Me=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Me){if(Te("showClone",this),yt.eventCanceled)return;je.parentNode!=Ie||this.options.group.revertClone?Pe?Ie.insertBefore(Ne,Pe):Ie.appendChild(Ne):Ie.insertBefore(Ne,je),this.options.group.revertClone&&this.animate(je,Ne),ie(Ne,"display",""),Me=!1}}else this._hideClone()}},lt&&Z(document,"touchmove",(function(e){(yt.active||et)&&e.cancelable&&e.preventDefault()})),yt.utils={on:Z,off:Q,css:ie,find:le,is:function(e,t){return!!ne(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:be,closest:ne,toggleClass:ae,clone:we,index:he,nextTick:St,cancelNextTick:$t,detectDirection:pt,getChild:fe},yt.get=function(e){return e[xe]},yt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(yt.utils=Y({},yt.utils,e.utils)),$e.mount(e)}))},yt.create=function(e,t){return new yt(e,t)},yt.version="1.13.0";var _t,Tt,Ot,jt,Dt,kt,It=[],Pt=!1;function At(){It.forEach((function(e){clearInterval(e.pid)})),It=[]}function Nt(){clearInterval(kt)}var Mt=be((function(e,t,n,r){if(t.scroll){var o,a=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=ce(),u=!1;Tt!==n&&(Tt=n,At(),_t=t.scroll,o=t.scrollFn,!0===_t&&(_t=ge(n,!0)));var d=0,f=_t;do{var p=f,h=ue(p),m=h.top,g=h.bottom,v=h.left,b=h.right,y=h.width,w=h.height,x=void 0,C=void 0,E=p.scrollWidth,S=p.scrollHeight,$=ie(p),_=p.scrollLeft,T=p.scrollTop;p===c?(x=y<E&&("auto"===$.overflowX||"scroll"===$.overflowX||"visible"===$.overflowX),C=w<S&&("auto"===$.overflowY||"scroll"===$.overflowY||"visible"===$.overflowY)):(x=y<E&&("auto"===$.overflowX||"scroll"===$.overflowX),C=w<S&&("auto"===$.overflowY||"scroll"===$.overflowY));var O=x&&(Math.abs(b-a)<=s&&_+y<E)-(Math.abs(v-a)<=s&&!!_),j=C&&(Math.abs(g-i)<=s&&T+w<S)-(Math.abs(m-i)<=s&&!!T);if(!It[d])for(var D=0;D<=d;D++)It[D]||(It[D]={});It[d].vx==O&&It[d].vy==j&&It[d].el===p||(It[d].el=p,It[d].vx=O,It[d].vy=j,clearInterval(It[d].pid),0==O&&0==j||(u=!0,It[d].pid=setInterval(function(){r&&0===this.layer&&yt.active._onTouchMove(Dt);var t=It[this.layer].vy?It[this.layer].vy*l:0,n=It[this.layer].vx?It[this.layer].vx*l:0;"function"==typeof o&&"continue"!==o.call(yt.dragged.parentNode[xe],n,t,e,Dt,It[this.layer].el)||ye(It[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=ge(f,!1)));Pt=u}}),30),Lt=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,o=e.activeSortable,a=e.dispatchSortableEvent,i=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||o;i();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function Rt(){}function Ft(){}Rt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=fe(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Lt},X(Rt,{pluginName:"revertOnSpill"}),Ft.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Lt},X(Ft,{pluginName:"removeOnSpill"});yt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Z(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Z(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Z(document,"touchmove",this._handleFallbackAutoScroll):Z(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Q(document,"dragover",this._handleAutoScroll):(Q(document,"pointermove",this._handleFallbackAutoScroll),Q(document,"touchmove",this._handleFallbackAutoScroll),Q(document,"mousemove",this._handleFallbackAutoScroll)),Nt(),At(),clearTimeout(re),re=void 0},nulling:function(){Dt=Tt=_t=Pt=kt=Ot=jt=null,It.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,o);if(Dt=e,t||W||U||K){Mt(e,this.options,a,t);var i=ge(a,!0);!Pt||kt&&r===Ot&&o===jt||(kt&&Nt(),kt=setInterval((function(){var a=ge(document.elementFromPoint(r,o),!0);a!==i&&(i=a,At()),Mt(e,n.options,a,t)}),10),Ot=r,jt=o)}else{if(!this.options.bubbleScroll||ge(a,!0)===ce())return void At();Mt(e,this.options,ge(a,!1),!1)}}},X(e,{pluginName:"scroll",initializeByDefault:!0})}),yt.mount(Ft,Rt);const zt=yt;const Xt=function(){$(".e2-js-menu-reorderable").each((function(){var e=$(this),t=e.data("sortable"),n={draggable:".e2-js-menu-reorderable-item",ghostClass:"e2-js-menu-reorderable-item-ghost",chosenClass:"e2-js-menu-reorderable-item-chosen",dragClass:"e2-js-menu-reorderable-item-drag",animation:400,forceFallback:!0,dataIdAttr:"data-id",fallbackOnBody:!0,fallbackTolerance:4,onStart:function(e){e.from.classList.add("e2-js-menu-reorderable-in-process")},onEnd:function(e){e.from.classList.remove("e2-js-menu-reorderable-in-process")},currentOrder:[],store:{set:function(t){var n=t.toArray();l({url:e.attr("data-action-save-order"),data:{order:n},success:function(e){t.options.currentOrder=n,console.log(e)},error:function(e){t.sort(t.options.currentOrder,!0)}})},get:function(e){var t=e.toArray();return e.options.currentOrder=t,[]}}};t||(t=new zt(this,n),e.data("sortable",t))}))};a(),f(),d(),v(),R(),b(),k(),I(),function(){if(!("serviceWorker"in navigator))return;var e=document.e2&&document.e2.basePath||"/";"/"!==e.slice(-1)&&(e+="/");var t=window.location&&window.location.pathname;if(!t||!/\/(new)\/?$/.test(t))return;navigator.serviceWorker.register(e+"e2-sw-offline-new.js",{scope:e+"new/"}).catch((function(e){window.console&&console.warn&&console.warn("Offline New support unavailable",e)}))}();var Yt,Bt,Ht,Ut,Wt,qt,Kt=$("#e2-user-picture-input"),Vt=Kt.attr("accept"),Gt=Kt.data("e2SupportedMessage"),Jt=A(Vt);"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0||Xt(),$(".e2-external-drop-target").on("dragover dragenter",(function(e){var t=e.originalEvent.dataTransfer;if(t&&(!t.types.contains||t.types.contains("Files"))&&(!t.types.indexOf||-1!==t.types.indexOf("Files"))){t.dropEffect&&(t.dropEffect="copy");var n=$(this);return n.addClass("e2-external-drop-target-dragover"),n.hasClass("e2-external-drop-target-altable")&&e.altKey?n.addClass("e2-external-drop-target-dragover-alt"):n.removeClass("e2-external-drop-target-dragover-alt"),!1}})).on("dragleave drop",(function(){return $(this).removeClass("e2-external-drop-target-dragover e2-external-drop-target-dragover-alt"),!1})),function(){var e=i(),t=$(".e2-user-picture-container"),n="e2-user-picture-container_empty",r="e2-user-picture-container_uploading",o="e2-user-picture-container_showspinner",a="e2-user-picture-container_deleting",d="e2-user-picture-container_deleted",f=!t.eq(0).hasClass(n);function p(a,i){var l=a.data("href");if(Jt&&!Jt.allows(i.name))return s({message:Gt,debug:{data:{file:i}}}),!1;f=!a.hasClass(n),t.each((function(){var t=$(this),n=t.find(".e2-user-picture-container-link"),i=f?t.find(".e2-user-picture-image"):t.find(".e2-user-picture-placeholder"),s=t.find(".e2-user-picture-spinner");t[0]===a[0]?e?(i.off(e+".uploadUserPic").one(e+".uploadUserPic",(function(){t.hasClass(r)&&(t.addClass(o),u(s,1))})),t.addClass(r)):t.hasClass(r)&&(t.addClass(o),u(s,1)):t.addClass(r),n.attr("data-href",n.attr("href")).removeAttr("href")})),P({file:i,url:l,progress:function(e){e.lengthComputable&&t.each((function(){var t=$(this),n=t.find("circle.e2-progress");t[0]===a[0]&&c(n,e.loaded/e.total)}))},success:function(e){if(t.each((function(){var t=$(this),n=t.find(".e2-user-picture-container-link"),i=t.find(".e2-user-picture-spinner");void 0!==e.data&&void 0!==e.data["new-image-src"]||(t.removeClass(r),n.attr("href",n.attr("data-href")).removeAttr("data-href"),t[0]===a[0]&&(t.removeClass(o),u(i,0)))})),void 0===e.data||void 0===e.data["new-image-src"])return s({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:e}}}),!1;var i;f=!0,t.each((function(){var t=$(this),s=t.find(".e2-user-picture-container-link"),l=t.find("img"),c=t.find(".e2-user-picture-spinner");void 0===i?(l.one("load",(function(){t.removeClass(n).removeClass(r),s.attr("href",s.attr("data-href")).removeAttr("data-href"),t[0]===a[0]&&(t.removeClass(o),u(c,0))})),l.attr("src",e.data["new-image-src"]+"?"+Date.now()),i=l):i.one("load",(function(){l.attr("src",i.attr("src")),t.removeClass(n).removeClass(r),s.attr("href",s.attr("data-href")).removeAttr("data-href"),t[0]===a[0]&&(t.removeClass(o),u(c,0))}))}))},error:function(){t.each((function(){var e=$(this),t=e.find(".e2-user-picture-container-link"),n=e.find(".e2-user-picture-spinner");e.removeClass(r),t.attr("href",t.attr("data-href")).removeAttr("data-href"),e[0]===a[0]&&(e.removeClass(o),u(n,0))}))}})}t.on("drop",(function(e){var t,n=e.originalEvent.dataTransfer;return n&&n.files?n.files.length>1?(s({message:"er--js-can-upload-only-one-file",debug:{data:{event:e,files:n.files}}}),!1):(t=n.files[0],Jt&&!Jt.allows(t.name)?(s({message:Gt,debug:{data:{file:t}}}),!1):void p($(this),t)):(s({message:"er--js-no-files-to-upload",debug:{data:{event:e,dataTransfer:n}}}),!1)})),t.on("change",".e2-user-picture-input",(function(e){return!!e.target.files.length&&(p($(e.delegateTarget),e.target.files[0]),!1)})),t.on("click",".e2-user-picture-remove",(function(r){var o=$(r.delegateTarget),i=$(r.currentTarget).attr("data-href");t.each((function(){var e=$(this),t=e.find(".e2-user-picture-container-link");o[0]===e[0]&&e.addClass(a),t.attr("data-href",t.attr("href")).removeAttr("href")})),l({url:i,success:function(){f=!1,t.each((function(){var t=$(this),r=t.find(".e2-user-picture-container-link"),o=t.find("img");function i(){t.addClass(n).removeClass(d).removeClass(a),o.attr("src",""),r.attr("href",r.attr("data-href")).removeAttr("data-href")}e?(t.off(e+".removeUserPic").one(e+".removeUserPic",(function(){i()})),t.addClass(d)):i()}))},error:function(){t.each((function(){var e=$(this),t=e.find(".e2-user-picture-container-link");e.removeClass(a),t.attr("href",t.attr("data-href")).removeAttr("data-href")}))}})}))}(),function(){if(!o||!document.e2.localCopies)return;const e=$("#e2-drafts-item"),t=e.find(".js-unsaved-led"),n=$("#e2-new-note-item .js-unsaved-led"),r=$("#e2-notes-unsaved"),a=$("#form-note"),i=document.e2.localCopies.getList(),s=document.e2.localCopies.doesCopyExist("new"),l=a?$("#note-id").val():null,c="new"!==l&&document.e2.localCopies.doesCopyExist(l);let u=Object.keys(i).length;if(s&&u--,c&&u--,t&&u>0&&(e.show(),t.show()),n&&s&&n.show(),r){const e=document.e2.localCopies.getName("new");Object.prototype.hasOwnProperty.call(i,e)&&delete i[e];for(const e in i)"false"===i[e].isPublished&&($("#e2-draft-"+e+" .js-unsaved-led").show(),delete i[e]);if(Object.keys(i).length){for(const e in i){const t=document.e2.localCopies.get(e);if(!t)continue;const n=$("#e2-unsaved-note-prototype").clone(!0);n.attr("id",null),$(".e2-admin-link",n).attr("href",t.link),$("u",n).html(t.title),n.attr("style",""),r.append(n)}r.show()}}}(),Yt=function(e,t){t?(e.addClass("e2-admin-item_thinking"),u(e,1)):(u(e,0),e.removeClass("e2-admin-item_thinking"))},Bt=function(e,t){t?e.addClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled"):e.removeClass("e2-admin-item_disabled e2-popup-menu-widget-item_disabled")},Ht=function(e,t,n){if(e.blur(),e.hasClass("e2-admin-item_disabled"))return!0;if(e.hasClass("e2-popup-menu-widget-item_disabled"))return!0;var r=e.hasClass("e2-admin-item_on")?"on":"off",o=void 0!==e.data("e2-js-action")&&e.data("e2-js-action").indexOf("couple-trigger")>=0;e.removeClass("e2-admin-item_on"),Yt(e,1),Bt(e,1),l({url:e.attr("href"),data:"token="+e.data("e2-js-action-token")+"&result=ajaxresult",success:function(o){if(void 0===o.data||void 0===o.data["flag-now-on"])return s({message:"er--js-server-error",debug:{message:"Server responce malformed",data:{response:o}}}),"on"===r&&e.addClass("e2-admin-item_on"),!1;o.data["flag-now-on"]?(e.addClass("e2-admin-item_on"),t(e,o.data["new-href"])):(e.removeClass("e2-admin-item_on"),n(e,o.data["new-href"]))},error:function(){"on"===r&&e.addClass("e2-admin-item_on"),o&&e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM")},complete:function(){Yt(e,0),Bt(e,0)}})},$(".e2-admin-item").add(".e2-popup-menu-widget-item").on("click",(function(){return e=$(this),t={"toggle-favourite":function(){Ht(e,(function(e,t){e.attr("href",t).parents(".e2-note").addClass("e2-note-favourite")}),(function(e,t){e.attr("href",t).parents(".e2-note").removeClass("e2-note-favourite")}))},"toggle-pinned":function(){Ht(e,(function(e,t){e.attr("href",t)}),(function(e,t){e.attr("href",t)}))},"toggle-important":function(){Ht(e,(function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").addClass("e2-comment-piece-marked")}),(function(e,t){e.attr("href",t).parents(".e2-comment, .e2-comment-form-meta-area").find(".e2-comment-piece-markable").removeClass("e2-comment-piece-marked")}))},"removed-href":function(){Ht(e,(function(e,t){}),(function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-author").addClass("e2-comment-author-removed"),n.find(".e2-comment-meta, .e2-comment-content").slideUp(200),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideUp(200),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"removed"})}))},"replaced-href":function(){Ht(e,(function(e,t){var n=e.parents(".e2-comment");n.find(".e2-comment-content, .e2-comment-meta").slideDown(200),n.find(".e2-comment-author").removeClass("e2-comment-author-removed"),n.hasClass(".e2-reply")||n.siblings(".e2-reply").slideDown(200),e.trigger("E2_ADMIN_COUPLE_CHANGE_ITEM",{response:"recovered"})}),(function(e,t){}))},"couple-trigger":function(){e.trigger("E2_ADMIN_COUPLE_WILL_THINK")}},n=!0,(r=e.data("e2-js-action"))&&$.each(r.split(","),(function(e,r){"function"==typeof t[r]&&(n=!1,t[r]())})),n;var e,t,n,r})),Ut="e2-admin-couple-item_hidden",Wt="e2-admin-couple_thinking",qt=function(e){if(e.length){var t=e.find(".e2-admin-couple-item");e.find('[data-e2-js-action*="couple-trigger"]').on("E2_ADMIN_COUPLE_CHANGE_ITEM",(function(n,r){u(e.find(".e2-admin-couple-spinner"),0),"object"==typeof r&&"string"==typeof r.response&&(t.addClass(Ut),e.find(".e2-admin-couple-item_"+r.response).removeClass(Ut)),e.removeClass(Wt)})).on("E2_ADMIN_COUPLE_WILL_THINK",(function(){u(e.find(".e2-admin-couple-spinner"),1),e.addClass(Wt)}))}},$(".e2-admin-couple").each((function(){qt($(this))})),$(document).on("E2_ADMIN_COUPLE_INIT",(function(e,t){void 0!==t.$couple&&qt(t.$couple)}))})()}));